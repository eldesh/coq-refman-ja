

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ja" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ja" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>型クラス &mdash; Coq 8.8.2 ドキュメント</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/notations.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/fonts.css" type="text/css" />
  <link rel="stylesheet" href="../_static/ansi.css" type="text/css" />
  <link rel="stylesheet" href="../_static/coqdoc.css" type="text/css" />
  <link rel="stylesheet" href="../_static/notations.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pre-text.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="Omega: a solver for quantifier-free problems in Presburger Arithmetic" href="omega.html" />
    <link rel="prev" title="正準構造" href="canonical-structures.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Coq
          

          
          </a>

          
            
            
              <div class="version">
                8.8.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">索引</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coq-cmdindex.html">Command index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coq-tacindex.html">Tactic index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coq-optindex.html">Flags, options and tables index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coq-exnindex.html">Errors and warnings index</a></li>
</ul>
<p class="caption"><span class="caption-text">はじめに</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">はじめに</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Credits</a></li>
</ul>
<p class="caption"><span class="caption-text">言語</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language/gallina-specification-language.html">仕様記述言語 Gallina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/gallina-extensions.html"><span class="smallcaps">Gallina</span> の拡張</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/coq-library.html">The <span class="smallcaps">Coq</span> library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/cic.html">Calculus of Inductive Constructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/module-system.html">The Module System</a></li>
</ul>
<p class="caption"><span class="caption-text">証明エンジン</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/vernacular-commands.html">Vernacular commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/proof-handling.html">Proof handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/tactics.html">Tactics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/ltac.html">The tactic language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/detailed-tactic-examples.html">Detailed examples of tactics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html">The <span class="smallcaps">SSReflect</span> proof language</a></li>
</ul>
<p class="caption"><span class="caption-text">ユーザ拡張</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user-extensions/syntax-extensions.html">Syntax extensions and interpretation scopes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-extensions/proof-schemes.html">Proof schemes</a></li>
</ul>
<p class="caption"><span class="caption-text">実用ツール</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../practical-tools/coq-commands.html">The <span class="smallcaps">Coq</span> commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../practical-tools/utilities.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="../practical-tools/coqide.html"><span class="smallcaps">Coq</span> Integrated Development Environment</a></li>
</ul>
<p class="caption"><span class="caption-text">付録</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="extended-pattern-matching.html">Extended pattern matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="implicit-coercions.html">Implicit Coercions</a></li>
<li class="toctree-l1"><a class="reference internal" href="canonical-structures.html">正準構造</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">型クラス</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#class-and-instance-declarations">クラスとインスタンスの宣言</a></li>
<li class="toctree-l2"><a class="reference internal" href="#binding-classes">クラスの束縛</a></li>
<li class="toctree-l2"><a class="reference internal" href="#parameterized-instances">パラメータ化されたインスタンス</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sections-and-contexts">セクションとコンテキスト</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-hierarchies">階層の構築</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#superclasses">スーパークラス</a></li>
<li class="toctree-l3"><a class="reference internal" href="#substructures">部分構造</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#summary-of-the-commands">コマンドの概要</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#typeclasses-transparent-typclasses-opaque">透明な型クラス、不透明な型クラス</a></li>
<li class="toctree-l3"><a class="reference internal" href="#options">Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="#typeclasses-eauto">型クラスの eauto <cite>:=</cite></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="omega.html">Omega: a solver for quantifier-free problems in Presburger Arithmetic</a></li>
<li class="toctree-l1"><a class="reference internal" href="micromega.html">Micromega: tactics for solving arithmetic goals over ordered rings</a></li>
<li class="toctree-l1"><a class="reference internal" href="extraction.html">Extraction of programs in <span class="smallcaps">OCaml</span> and Haskell</a></li>
<li class="toctree-l1"><a class="reference internal" href="program.html">Program</a></li>
<li class="toctree-l1"><a class="reference internal" href="ring.html">The ring and field tactic families</a></li>
<li class="toctree-l1"><a class="reference internal" href="nsatz.html">Nsatz: tactics for proving equalities in integral domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="generalized-rewriting.html">Generalized rewriting</a></li>
<li class="toctree-l1"><a class="reference internal" href="parallel-proof-processing.html">Asynchronous and Parallel Proof Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="miscellaneous-extensions.html">Miscellaneous extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="universe-polymorphism.html">Polymorphic Universes</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../zebibliography.html">Bibliography</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Coq</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>型クラス</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/coq/coq/blob/master/doc/sphinx/addendum/type-classes.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="math-preamble math notranslate nohighlight">
\[\begin{split}\newcommand{\alors}{\textsf{then}}
\newcommand{\alter}{\textsf{alter}}
\newcommand{\as}{\kw{as}}
\newcommand{\Assum}[3]{\kw{Assum}(#1)(#2:#3)}
\newcommand{\bool}{\textsf{bool}}
\newcommand{\case}{\kw{case}}
\newcommand{\conc}{\textsf{conc}}
\newcommand{\cons}{\textsf{cons}}
\newcommand{\consf}{\textsf{consf}}
\newcommand{\conshl}{\textsf{cons\_hl}}
\newcommand{\Def}[4]{\kw{Def}(#1)(#2:=#3:#4)}
\newcommand{\emptyf}{\textsf{emptyf}}
\newcommand{\End}{\kw{End}}
\newcommand{\kwend}{\kw{end}}
\newcommand{\EqSt}{\textsf{EqSt}}
\newcommand{\even}{\textsf{even}}
\newcommand{\evenO}{\textsf{even}_\textsf{O}}
\newcommand{\evenS}{\textsf{even}_\textsf{S}}
\newcommand{\false}{\textsf{false}}
\newcommand{\filter}{\textsf{filter}}
\newcommand{\Fix}{\kw{Fix}}
\newcommand{\fix}{\kw{fix}}
\newcommand{\for}{\textsf{for}}
\newcommand{\forest}{\textsf{forest}}
\newcommand{\from}{\textsf{from}}
\newcommand{\Functor}{\kw{Functor}}
\newcommand{\haslength}{\textsf{has\_length}}
\newcommand{\hd}{\textsf{hd}}
\newcommand{\ident}{\textsf{ident}}
\newcommand{\In}{\kw{in}}
\newcommand{\Ind}[4]{\kw{Ind}[#2](#3:=#4)}
\newcommand{\ind}[3]{\kw{Ind}~[#1]\left(#2\mathrm{~:=~}#3\right)}
\newcommand{\Indp}[5]{\kw{Ind}_{#5}(#1)[#2](#3:=#4)}
\newcommand{\Indpstr}[6]{\kw{Ind}_{#5}(#1)[#2](#3:=#4)/{#6}}
\newcommand{\injective}{\kw{injective}}
\newcommand{\kw}[1]{\textsf{#1}}
\newcommand{\lb}{\lambda}
\newcommand{\length}{\textsf{length}}
\newcommand{\letin}[3]{\kw{let}~#1:=#2~\kw{in}~#3}
\newcommand{\List}{\textsf{list}}
\newcommand{\lra}{\longrightarrow}
\newcommand{\Match}{\kw{match}}
\newcommand{\Mod}[3]{{\kw{Mod}}({#1}:{#2}\,\zeroone{:={#3}})}
\newcommand{\ModA}[2]{{\kw{ModA}}({#1}=={#2})}
\newcommand{\ModS}[2]{{\kw{Mod}}({#1}:{#2})}
\newcommand{\ModType}[2]{{\kw{ModType}}({#1}:={#2})}
\newcommand{\mto}{.\;}
\newcommand{\Nat}{\mathbb{N}}
\newcommand{\nat}{\textsf{nat}}
\newcommand{\Nil}{\textsf{nil}}
\newcommand{\nilhl}{\textsf{nil\_hl}}
\newcommand{\nO}{\textsf{O}}
\newcommand{\node}{\textsf{node}}
\newcommand{\nS}{\textsf{S}}
\newcommand{\odd}{\textsf{odd}}
\newcommand{\oddS}{\textsf{odd}_\textsf{S}}
\newcommand{\ovl}[1]{\overline{#1}}
\newcommand{\Pair}{\textsf{pair}}
\newcommand{\Prod}{\textsf{prod}}
\newcommand{\Prop}{\textsf{Prop}}
\newcommand{\return}{\kw{return}}
\newcommand{\Set}{\textsf{Set}}
\newcommand{\si}{\textsf{if}}
\newcommand{\sinon}{\textsf{else}}
\newcommand{\Sort}{\cal S}
\newcommand{\Str}{\textsf{Stream}}
\newcommand{\Struct}{\kw{Struct}}
\newcommand{\subst}[3]{#1\{#2/#3\}}
\newcommand{\tl}{\textsf{tl}}
\newcommand{\tree}{\textsf{tree}}
\newcommand{\true}{\textsf{true}}
\newcommand{\Type}{\textsf{Type}}
\newcommand{\unfold}{\textsf{unfold}}
\newcommand{\WEV}[3]{\mbox{$#1[] \vdash #2 \lra  #3$}}
\newcommand{\WEVT}[3]{\mbox{$#1[] \vdash #2 \lra$}\\ \mbox{$ #3$}}
\newcommand{\WF}[2]{{\cal W\!F}(#1)[#2]}
\newcommand{\WFE}[1]{\WF{E}{#1}}
\newcommand{\WFT}[2]{#1[] \vdash {\cal W\!F}(#2)}
\newcommand{\WFTWOLINES}[2]{{\cal W\!F}\begin{array}{l}(#1)\\\mbox{}[{#2}]\end{array}}
\newcommand{\with}{\kw{with}}
\newcommand{\WS}[3]{#1[] \vdash #2 &lt;: #3}
\newcommand{\WSE}[2]{\WS{E}{#1}{#2}}
\newcommand{\WT}[4]{#1[#2] \vdash #3 : #4}
\newcommand{\WTE}[3]{\WT{E}{#1}{#2}{#3}}
\newcommand{\WTEG}[2]{\WTE{\Gamma}{#1}{#2}}
\newcommand{\WTM}[3]{\WT{#1}{}{#2}{#3}}
\newcommand{\zeroone}[1]{[{#1}]}
\newcommand{\zeros}{\textsf{zeros}}
\end{split}\]</div>
<div class="section" id="type-classes">
<span id="typeclasses"></span><h1>型クラス<a class="headerlink" href="#type-classes" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>この章では型クラスに関連したコマンドのクイックリファレンスを提供します。実質的な型クラスの導入に付いてはシステムについての説明が <a class="bibtex reference internal" href="../zebibliography.html#sozeau08" id="id1">[SO08]</a> にあることに加え Haskell での型クラスについての論文も応用することが出来ます。</p>
<div class="section" id="class-and-instance-declarations">
<h2>クラスとインスタンスの宣言<a class="headerlink" href="#class-and-instance-declarations" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>クラスとインスタンスの宣言の構文は Coq のレコード構文と同じです:</p>
<p><code class="docutils literal notranslate"><span class="pre">Class</span> <span class="pre">Id</span> <span class="pre">(</span></code> <cite>p</cite><span class="math notranslate nohighlight">\(_{1}\)</span> <code class="docutils literal notranslate"><span class="pre">:</span></code> <cite>t</cite><span class="math notranslate nohighlight">\(_{1}\)</span> <code class="docutils literal notranslate"><span class="pre">)</span> <span class="pre">⋯</span> <span class="pre">(</span></code> <cite>p</cite><span class="math notranslate nohighlight">\(_{n}\)</span> <code class="docutils literal notranslate"><span class="pre">:</span></code> <cite>t</cite><span class="math notranslate nohighlight">\(_{n}\)</span> <code class="docutils literal notranslate"><span class="pre">)</span> <span class="pre">[:</span>
<span class="pre">sort]</span> <span class="pre">:=</span> <span class="pre">{</span></code> <cite>f</cite><span class="math notranslate nohighlight">\(_{1}\)</span> <code class="docutils literal notranslate"><span class="pre">:</span></code> <cite>u</cite><span class="math notranslate nohighlight">\(_{1}\)</span> <code class="docutils literal notranslate"><span class="pre">;</span> <span class="pre">⋮</span></code> <cite>f</cite><span class="math notranslate nohighlight">\(_{m}\)</span> <code class="docutils literal notranslate"><span class="pre">:</span></code> <cite>u</cite><span class="math notranslate nohighlight">\(_{m}\)</span> <code class="docutils literal notranslate"><span class="pre">}.</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">Instance</span> <span class="pre">ident</span> <span class="pre">:</span> <span class="pre">Id</span></code> <cite>p</cite><span class="math notranslate nohighlight">\(_{1}\)</span> <code class="docutils literal notranslate"><span class="pre">⋯</span></code> <cite>p</cite><span class="math notranslate nohighlight">\(_{n}\)</span> <code class="docutils literal notranslate"><span class="pre">:=</span> <span class="pre">{</span></code> <cite>f</cite><span class="math notranslate nohighlight">\(_{1}\)</span> <code class="docutils literal notranslate"><span class="pre">:=</span></code> <cite>t</cite><span class="math notranslate nohighlight">\(_{1}\)</span> <code class="docutils literal notranslate"><span class="pre">;</span> <span class="pre">⋮</span></code> <cite>f</cite><span class="math notranslate nohighlight">\(_{m}\)</span> <code class="docutils literal notranslate"><span class="pre">:=</span></code> <cite>t</cite><span class="math notranslate nohighlight">\(_{m}\)</span> <code class="docutils literal notranslate"><span class="pre">}.</span></code></p>
<p>変数 <cite>p</cite><span class="math notranslate nohighlight">\(_{i}\)</span> <code class="docutils literal notranslate"><span class="pre">:</span></code> <cite>t</cite><span class="math notranslate nohighlight">\(_{i}\)</span> はクラスの <em>パラメータ</em> と呼ばれ、<cite>f</cite><span class="math notranslate nohighlight">\(_{i}\)</span> <code class="docutils literal notranslate"><span class="pre">:</span></code> <cite>t</cite><span class="math notranslate nohighlight">\(_{i}\)</span> は <em>メソッド</em> と呼ばれます。各クラス定義は対応するレコード宣言を生みだし、各インスタンスは標準の定義でありその名前は ident で与えられ、その型はレコード型のインスタンス化です。</p>
<p>この章の残りでは以下の例示クラスを使います。</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span class="coqdoc-keyword">Class</span><span> </span><span class="coqdoc-var">EqDec</span><span> (</span><span class="coqdoc-var">A</span><span> : </span><span class="coqdoc-keyword">Type</span><span>) := {</span><span>
  </span><span class="coqdoc-var">eqb</span><span> : </span><span class="coqdoc-var">A</span><span> -&gt; </span><span class="coqdoc-var">A</span><span> -&gt; </span><span class="coqdoc-var">bool</span><span> ;</span><span>
  </span><span class="coqdoc-var">eqb_leibniz</span><span> : </span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span>, </span><span class="coqdoc-var">eqb</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> = </span><span class="coqdoc-var">true</span><span> -&gt; </span><span class="coqdoc-var">x</span><span> = </span><span class="coqdoc-var">y</span><span> }.</span></dt><dd class="coqtop-hidden"><span>EqDec is defined
eqb is defined
eqb_leibniz is defined</span></dd>
</dl>
</div>
<p>このクラスはいくつかの型上での Leibniz 等値性と互換性があるような真偽値等値性テストを実装しています。実装例は:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span class="coqdoc-keyword">Instance</span><span> </span><span class="coqdoc-var">unit_EqDec</span><span> : </span><span class="coqdoc-var">EqDec</span><span> </span><span class="coqdoc-var">unit</span><span> :=</span><span>
 { </span><span class="coqdoc-var">eqb</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> := </span><span class="coqdoc-var">true</span><span> ;</span><span>
   </span><span class="coqdoc-var">eqb_leibniz</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> </span><span class="coqdoc-var">H</span><span> :=</span><span>
         </span><span class="coqdoc-keyword">match</span><span> </span><span class="coqdoc-var">x</span><span>, </span><span class="coqdoc-var">y</span><span> </span><span class="coqdoc-keyword">return</span><span> </span><span class="coqdoc-var">x</span><span> = </span><span class="coqdoc-var">y</span><span> </span><span class="coqdoc-keyword">with</span><span> </span><span class="coqdoc-var">tt</span><span>, </span><span class="coqdoc-var">tt</span><span> =&gt; </span><span class="coqdoc-var">eq_refl</span><span> </span><span class="coqdoc-var">tt</span><span> </span><span class="coqdoc-keyword">end</span><span> }.</span></dt><dd class="coqtop-hidden"><span>unit_EqDec is defined</span></dd>
</dl>
</div>
<p>インスタンス宣言の中で全てのメンバを与えない場合、Coq は証明モードに入りユーザが残りのフィールドの住民の構築を要求されます。例えば:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span class="coqdoc-keyword">Instance</span><span> </span><span class="coqdoc-var">eq_bool</span><span> : </span><span class="coqdoc-var">EqDec</span><span> </span><span class="coqdoc-var">bool</span><span> :=</span><span>
{ </span><span class="coqdoc-var">eqb</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> := </span><span class="coqdoc-keyword">if</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-keyword">then</span><span> </span><span class="coqdoc-var">y</span><span> </span><span class="coqdoc-keyword">else</span><span> </span><span class="coqdoc-var">negb</span><span> </span><span class="coqdoc-var">y</span><span> }.</span></dt><dd class="coqtop-hidden"><span>1 subgoal
  
  ============================
  </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">forall</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> x y : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">bool</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">, (</span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">if</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">then</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">y</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">else</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">negb</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">y</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">)</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> =</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">true</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> =</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">y</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span></dd>
</dl>
<span></span><dl>
<dt><span class="coqdoc-keyword">Proof</span><span>.</span></dt><dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-tactic">intros</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> </span><span class="coqdoc-var">H</span><span>.</span></dt><dd><span>1 subgoal
  
  x, y : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">bool</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  H : (</span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">if</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">then</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">y</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">else</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">negb</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">y</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">)</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> =</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">true</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  ============================
  </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> =</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">y</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span></dd>
</dl>
<span></span><dl>
<dt><span class="coqdoc-tactic">destruct</span><span> </span><span class="coqdoc-var">x</span><span> ; </span><span class="coqdoc-tactic">destruct</span><span> </span><span class="coqdoc-var">y</span><span> ; (</span><span class="coqdoc-tactic">discriminate</span><span> || </span><span class="coqdoc-tactic">reflexivity</span><span>).</span></dt><dd><span>No more subgoals.</span></dd>
</dl>
<span></span><dl>
<dt><span class="coqdoc-keyword">Defined</span><span>.</span></dt><dd><span>eq_bool is defined</span></dd>
</dl>
</div>
<p><a class="reference internal" href="#coq:cmd.instance" title="Instance"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Instance</span></code></a> の証明の透過性よって決まる全てのフィールドの透過性に注意するべきです。替わりに <a class="reference internal" href="#coq:cmdv.program-instance" title="Program Instance"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Program</span> <span class="pre">Instance</span></code></a> という類型を使うことが出来、これは課題の扱いについてよりリッチな機能を持っています。</p>
</div>
<div class="section" id="binding-classes">
<h2>クラスの束縛<a class="headerlink" href="#binding-classes" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>一度型クラスが宣言されると、それをクラス束縛子の中で使うことができます。</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">neqb</span><span> {</span><span class="coqdoc-var">A</span><span>} {</span><span class="coqdoc-var">eqa</span><span> : </span><span class="coqdoc-var">EqDec</span><span> </span><span class="coqdoc-var">A</span><span>} (</span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> : </span><span class="coqdoc-var">A</span><span>) := </span><span class="coqdoc-var">negb</span><span> (</span><span class="coqdoc-var">eqb</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span>).</span></dt><dd><span>neqb is defined</span></dd>
</dl>
</div>
<p>クラスメソッドを呼ぶとき、ある制約が生成され、それは適切なインスタンスが見つかる文脈の中でのみ充足されます。上の例では、制約 <code class="docutils literal notranslate"><span class="pre">EqDec</span> <span class="pre">A</span></code> が生成され <code class="docutils literal notranslate"><span class="pre">eqa</span> <span class="pre">:</span> <span class="pre">EqDec</span> <span class="pre">A</span></code> によって充足されます。制約を充足するものが見つからない場合は、エラーが起きます:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span class="coqdoc-var">Fail</span><span> </span><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">neqb'</span><span> (</span><span class="coqdoc-var">A</span><span> : </span><span class="coqdoc-keyword">Type</span><span>) (</span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> : </span><span class="coqdoc-var">A</span><span>) := </span><span class="coqdoc-var">negb</span><span> (</span><span class="coqdoc-var">eqb</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span>).</span></dt><dd><span>The command has indeed failed with message:
Unable to satisfy the following constraints:
In environment:
A : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
x, y : </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">

?EqDec : &quot;</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EqDec</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">&quot;</span></dd>
</dl>
</div>
<p>制約を解消するために使われるアルゴリズムは <a class="reference internal" href="../proof-engine/tactics.html#coq:tacn.eauto" title="eauto"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">eauto</span></code></a> タクティックの類型で、それは補題 (インスタンス) の集合をもって証明探索を行います。それは <code class="docutils literal notranslate"><span class="pre">typeclass_instances</span></code> データベース内に定義された補題だけでなくローカルな仮定も使います。従ってこの例は以下のようにも書くことが出来ます:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">neqb'</span><span> </span><span class="coqdoc-var">A</span><span> (</span><span class="coqdoc-var">eqa</span><span> : </span><span class="coqdoc-var">EqDec</span><span> </span><span class="coqdoc-var">A</span><span>) (</span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> : </span><span class="coqdoc-var">A</span><span>) := </span><span class="coqdoc-var">negb</span><span> (</span><span class="coqdoc-var">eqb</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span>).</span></dt><dd><span>neqb' is defined</span></dd>
</dl>
</div>
<p>しかしながら、替わりに型クラスの特別なサポートを持った束縛子の一般化を使うべきです。</p>
<ul class="simple">
<li><p>それらは型クラスの引数の状態を自動的に最大限暗黙に設定し、クラスメソッドのように簡単に使える派生関数を作ります。上の例では、<code class="docutils literal notranslate"><span class="pre">A</span></code> と <code class="docutils literal notranslate"><span class="pre">eqa</span></code> が最大限暗黙に設定されるはずです。</p></li>
<li><p>それらは部分適用された型クラスの暗黙的な量化をサポートします (<a class="reference internal" href="../language/gallina-extensions.html#implicit-generalization"><span class="std std-ref">暗黙の一般化</span></a>)。型クラスの束縛子の一部として与えられなかった引数も自動的に一般化されます。</p></li>
<li><p>それらは <a class="reference internal" href="#superclasses"><span class="std std-ref">スーパークラス</span></a> に於ける暗黙の量化もサポートします。</p></li>
</ul>
<p>以前の例に続き、次のように書くことが出来ます。</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span class="coqdoc-keyword">Generalizable</span><span> </span><span class="coqdoc-keyword">Variables</span><span> </span><span class="coqdoc-var">A</span><span> </span><span class="coqdoc-var">B</span><span> </span><span class="coqdoc-var">C</span><span>.</span></dt><dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">neqb_implicit</span><span> `{</span><span class="coqdoc-var">eqa</span><span> : </span><span class="coqdoc-var">EqDec</span><span> </span><span class="coqdoc-var">A</span><span>} (</span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> : </span><span class="coqdoc-var">A</span><span>) := </span><span class="coqdoc-var">negb</span><span> (</span><span class="coqdoc-var">eqb</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span>).</span></dt><dd><span>neqb_implicit is defined</span></dd>
</dl>
</div>
<p>ここでは <code class="docutils literal notranslate"><span class="pre">A</span></code> は暗黙的に一般化され、結果の関数は上のそれに等しくなります。</p>
</div>
<div class="section" id="parameterized-instances">
<h2>パラメータ化されたインスタンス<a class="headerlink" href="#parameterized-instances" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>インスタンスの前に束縛コンテキストとして制約を与えることで Haskell のようにパラメータ化されたインスタンスを簡潔に宣言することが出来ます。例えば:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span class="coqdoc-keyword">Instance</span><span> </span><span class="coqdoc-var">prod_eqb</span><span> `(</span><span class="coqdoc-var">EA</span><span> : </span><span class="coqdoc-var">EqDec</span><span> </span><span class="coqdoc-var">A</span><span>, </span><span class="coqdoc-var">EB</span><span> : </span><span class="coqdoc-var">EqDec</span><span> </span><span class="coqdoc-var">B</span><span>) : </span><span class="coqdoc-var">EqDec</span><span> (</span><span class="coqdoc-var">A</span><span> * </span><span class="coqdoc-var">B</span><span>) :=</span><span>
{ </span><span class="coqdoc-var">eqb</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> := </span><span class="coqdoc-keyword">match</span><span> </span><span class="coqdoc-var">x</span><span>, </span><span class="coqdoc-var">y</span><span> </span><span class="coqdoc-keyword">with</span><span>
             | (</span><span class="coqdoc-var">la</span><span>, </span><span class="coqdoc-var">ra</span><span>), (</span><span class="coqdoc-var">lb</span><span>, </span><span class="coqdoc-var">rb</span><span>) =&gt; </span><span class="coqdoc-var">andb</span><span> (</span><span class="coqdoc-var">eqb</span><span> </span><span class="coqdoc-var">la</span><span> </span><span class="coqdoc-var">lb</span><span>) (</span><span class="coqdoc-var">eqb</span><span> </span><span class="coqdoc-var">ra</span><span> </span><span class="coqdoc-var">rb</span><span>)</span><span>
             </span><span class="coqdoc-keyword">end</span><span> }.</span></dt><dd class="coqtop-hidden"><span>1 subgoal
  
  A : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  EA : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EqDec</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  B : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  EB : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EqDec</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">B</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  ============================
  </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">forall</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> x y : </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> *</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">B</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">,
  (</span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">let</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> (la, ra) := </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative"> in</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">let</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> (lb, rb) := </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">y</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative"> in</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> (</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">eqb</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">la</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">lb</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> &amp;&amp;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">eqb</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">ra</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">rb</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">)%bool)</span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> =</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">true</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> =</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">y</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span></dd>
</dl>
<span></span><dl class="simple">
<dt class="coqtop-hidden"><span class="coqdoc-keyword">Abort</span><span>.</span></dt><dd class="coqtop-hidden"></dd>
</dl>
</div>
<p>これらのインスタンスはインスタンスヒントデータベースの中の補題だけでなく使われます。</p>
</div>
<div class="section" id="sections-and-contexts">
<h2>セクションとコンテキスト<a class="headerlink" href="#sections-and-contexts" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>開発のパラメータ化を型クラスによって楽にするため、セクションの文脈に変数を導入する、暗黙引数の機構と互換な新しい方法を提供します。その新しいコマンドはどんな束縛コンテキストでも引数として受け入れるということを除き、<a class="reference internal" href="../language/gallina-specification-language.html#coq:cmdv.variables" title="Variables"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Variables</span></code></a> Vernacular と同じように動作します。例えば:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span class="coqdoc-keyword">Section</span><span> </span><span class="coqdoc-var">EqDec_defs</span><span>.</span></dt><dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Context</span><span> `{</span><span class="coqdoc-var">EA</span><span> : </span><span class="coqdoc-var">EqDec</span><span> </span><span class="coqdoc-var">A</span><span>}.</span></dt><dd><span>A is declared
EA is declared</span></dd>
<dt><span class="coqdoc-keyword">Global Instance</span><span> </span><span class="coqdoc-var">option_eqb</span><span> : </span><span class="coqdoc-var">EqDec</span><span> (</span><span class="coqdoc-var">option</span><span> </span><span class="coqdoc-var">A</span><span>) :=</span><span>
  { </span><span class="coqdoc-var">eqb</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> := </span><span class="coqdoc-keyword">match</span><span> </span><span class="coqdoc-var">x</span><span>, </span><span class="coqdoc-var">y</span><span> </span><span class="coqdoc-keyword">with</span><span>
         | </span><span class="coqdoc-var">Some</span><span> </span><span class="coqdoc-var">x</span><span>, </span><span class="coqdoc-var">Some</span><span> </span><span class="coqdoc-var">y</span><span> =&gt; </span><span class="coqdoc-var">eqb</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span>
         | </span><span class="coqdoc-var">None</span><span>, </span><span class="coqdoc-var">None</span><span> =&gt; </span><span class="coqdoc-var">true</span><span>
         | </span><span class="coqdoc-var">_</span><span>, </span><span class="coqdoc-var">_</span><span> =&gt; </span><span class="coqdoc-var">false</span><span>
         </span><span class="coqdoc-keyword">end</span><span> }.</span></dt><dd><span>1 subgoal
  
  A : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  EA : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EqDec</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  ============================
  </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">forall</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> x y : </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">option</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">,
  </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">match</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">with</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  | </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">Some</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x0</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> =&gt; </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">match</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">y</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">with</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
               | </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">Some</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">y0</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> =&gt; </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">eqb</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x0</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">y0</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
               | </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">None</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> =&gt; </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">false</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
               </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">end</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  | </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">None</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> =&gt; </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">match</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">y</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">with</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
            | </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">Some</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> _ =&gt; </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">false</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
            | </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">None</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> =&gt; </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">true</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
            </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">end</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">
  </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">end</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> =</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">true</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">x</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> =</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">y</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span></dd>
<dt><span class="coqdoc-var">Admitted</span><span>.</span></dt><dd><span>option_eqb is declared</span></dd>
<dt><span class="coqdoc-keyword">End</span><span> </span><span class="coqdoc-var">EqDec_defs</span><span>.</span></dt><dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">About</span><span> </span><span class="coqdoc-var">option_eqb</span><span>.</span></dt><dd><span>option_eqb : </span><span class="ansi-fg-default ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">forall</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> A : </span><span class="ansi-fg-yellow ansi-bg-default ansi-bold ansi-no-italic ansi-no-underline ansi-no-negative">Type</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">, </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EqDec</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"></span><span class="ansi-fg-white ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> -&gt;</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">EqDec</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> (</span><span class="ansi-fg-light-green ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">option</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative"> </span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">A</span><span class="ansi-fg-default ansi-bg-default ansi-no-bold ansi-no-italic ansi-no-underline ansi-no-negative">)

Arguments A, EA are implicit and maximally inserted
Argument scopes are [type_scope _]
Expands to: Constant Top.option_eqb</span></dd>
</dl>
</div>
<p>ここで Global 修飾子はセクションの終わりで、かつてそれが使う文脈変数により一般化されていたインスタンスを再宣言します。</p>
</div>
<div class="section" id="building-hierarchies">
<h2>階層の構築<a class="headerlink" href="#building-hierarchies" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="superclasses">
<span id="id2"></span><h3>スーパークラス<a class="headerlink" href="#superclasses" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>他のクラスによってクラスをパラメタライズし、クラスとスーパークラスの階層を生成することも出来ます。同様に、束縛コンテキストとしてスーパークラスを与えます:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span class="coqdoc-keyword">Class</span><span> </span><span class="coqdoc-var">Ord</span><span> `(</span><span class="coqdoc-var">E</span><span> : </span><span class="coqdoc-var">EqDec</span><span> </span><span class="coqdoc-var">A</span><span>) := { </span><span class="coqdoc-var">le</span><span> : </span><span class="coqdoc-var">A</span><span> -&gt; </span><span class="coqdoc-var">A</span><span> -&gt; </span><span class="coqdoc-var">bool</span><span> }.</span></dt><dd><span>Ord is defined
le is defined</span></dd>
</dl>
</div>
<p>Haskell と違い、スーパークラスのために特別な構文はありませんが、この宣言は以下と等しくなります:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Class `(E : EqDec A) =&gt; Ord A :=
  { le : A -&gt; A -&gt; bool }.
</pre></div>
</div>
<p>この定義が意味するところは <code class="docutils literal notranslate"><span class="pre">Ord</span></code> クラスのインスタンスは <code class="docutils literal notranslate"><span class="pre">EqDec</span></code> のインスタンスを持っていなければならないということです。サブクラスのパラメータは少なくともそのスーパークラスのパラメータ全てをそれらの出現順で含みます (ここでは A ただ一つです)。見てきたように、<code class="docutils literal notranslate"><span class="pre">Ord</span></code> は二つのパラメータ: <code class="docutils literal notranslate"><span class="pre">A</span></code> 型と <code class="docutils literal notranslate"><span class="pre">EqDec</span> <span class="pre">A</span></code> 型の <code class="docutils literal notranslate"><span class="pre">E</span></code> を持つレコードとして符号化されます。しかし、それでもそれを一般化束縛子の中で単一パラメータを持つかのように使うことができます: スーパークラスの一般化は自動的に行われます。</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">le_eqb</span><span> `{</span><span class="coqdoc-var">Ord</span><span> </span><span class="coqdoc-var">A</span><span>} (</span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> : </span><span class="coqdoc-var">A</span><span>) := </span><span class="coqdoc-var">andb</span><span> (</span><span class="coqdoc-var">le</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span>) (</span><span class="coqdoc-var">le</span><span> </span><span class="coqdoc-var">y</span><span> </span><span class="coqdoc-var">x</span><span>).</span></dt><dd><span>le_eqb is defined</span></dd>
</dl>
</div>
<p>場合によっては、構造の共有を指定できるようにするため、スーパークラスを明示的に与えたいかもしれません。それは通常の束縛子の中で直接行う、そしてクラス束縛子の中では <code class="docutils literal notranslate"><span class="pre">!</span></code> 修飾子を使うことで可能です。例えば:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span class="coqdoc-keyword">Definition</span><span> </span><span class="coqdoc-var">lt</span><span> `{</span><span class="coqdoc-var">eqa</span><span> : </span><span class="coqdoc-var">EqDec</span><span> </span><span class="coqdoc-var">A</span><span>, ! </span><span class="coqdoc-var">Ord</span><span> </span><span class="coqdoc-var">eqa</span><span>} (</span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> : </span><span class="coqdoc-var">A</span><span>) := </span><span class="coqdoc-var">andb</span><span> (</span><span class="coqdoc-var">le</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span>) (</span><span class="coqdoc-var">neqb</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span>).</span></dt><dd><span>lt is defined</span></dd>
</dl>
</div>
<p>この <code class="docutils literal notranslate"><span class="pre">!</span></code> 修飾子は束縛子が解析されCoqの通常の解釈に解析される方法を切り替えます。特に、例で示したように、それは可能であれば暗黙引数の機構を使います。</p>
</div>
<div class="section" id="substructures">
<h3>部分構造<a class="headerlink" href="#substructures" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>部分構造はクラスのインスタンス自身であるようなクラスの構成要素です。それらは論理的性質のためにクラスを使うときにたびたび現れます。例:</p>
<div class="coqtop literal-block docutils container">
<span></span><dl class="simple">
<dt class="coqtop-hidden"><span class="coqdoc-keyword">Require</span><span> </span><span class="coqdoc-keyword">Import</span><span> </span><span class="coqdoc-var">Relation_Definitions</span><span>.</span></dt><dd class="coqtop-hidden"></dd>
</dl>
<span></span><dl class="simple">
<dt><span class="coqdoc-keyword">Class</span><span> </span><span class="coqdoc-var">Reflexive</span><span> (</span><span class="coqdoc-var">A</span><span> : </span><span class="coqdoc-keyword">Type</span><span>) (</span><span class="coqdoc-var">R</span><span> : </span><span class="coqdoc-var">relation</span><span> </span><span class="coqdoc-var">A</span><span>) :=</span><span>
  </span><span class="coqdoc-tactic">reflexivity</span><span> : </span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">x</span><span>, </span><span class="coqdoc-var">R</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">x</span><span>.</span></dt><dd class="coqtop-hidden"></dd>
<dt><span class="coqdoc-keyword">Class</span><span> </span><span class="coqdoc-var">Transitive</span><span> (</span><span class="coqdoc-var">A</span><span> : </span><span class="coqdoc-keyword">Type</span><span>) (</span><span class="coqdoc-var">R</span><span> : </span><span class="coqdoc-var">relation</span><span> </span><span class="coqdoc-var">A</span><span>) :=</span><span>
  </span><span class="coqdoc-tactic">transitivity</span><span> : </span><span class="coqdoc-keyword">forall</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> </span><span class="coqdoc-var">z</span><span>, </span><span class="coqdoc-var">R</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">y</span><span> -&gt; </span><span class="coqdoc-var">R</span><span> </span><span class="coqdoc-var">y</span><span> </span><span class="coqdoc-var">z</span><span> -&gt; </span><span class="coqdoc-var">R</span><span> </span><span class="coqdoc-var">x</span><span> </span><span class="coqdoc-var">z</span><span>.</span></dt><dd class="coqtop-hidden"></dd>
</dl>
</div>
<p>これは反射的および推移的関係のシングルトンクラスを宣言します (説明は <a class="reference internal" href="#singleton-class"><span class="std std-ref">singleton class</span></a> 派生を見てください)。これらは他のクラスの一部として使うことが出来ます。</p>
<div class="coqtop literal-block docutils container">
<span></span><dl>
<dt><span class="coqdoc-keyword">Class</span><span> </span><span class="coqdoc-var">PreOrder</span><span> (</span><span class="coqdoc-var">A</span><span> : </span><span class="coqdoc-keyword">Type</span><span>) (</span><span class="coqdoc-var">R</span><span> : </span><span class="coqdoc-var">relation</span><span> </span><span class="coqdoc-var">A</span><span>) :=</span><span>
{ </span><span class="coqdoc-var">PreOrder_Reflexive</span><span> :&gt; </span><span class="coqdoc-var">Reflexive</span><span> </span><span class="coqdoc-var">A</span><span> </span><span class="coqdoc-var">R</span><span> ;</span><span>
  </span><span class="coqdoc-var">PreOrder_Transitive</span><span> :&gt; </span><span class="coqdoc-var">Transitive</span><span> </span><span class="coqdoc-var">A</span><span> </span><span class="coqdoc-var">R</span><span> }.</span></dt><dd><span>PreOrder is defined
PreOrder_Reflexive is defined
PreOrder_Transitive is defined</span></dd>
</dl>
</div>
<p><code class="docutils literal notranslate"><span class="pre">:&gt;</span></code> 構文は <code class="docutils literal notranslate"><span class="pre">PreOrder</span></code> それぞれが <code class="docutils literal notranslate"><span class="pre">Reflexive</span></code> 関係と見なせることを示しています。従って反射的関係が必要になるたび、代わりに前順序を使うことができます。これは <code class="docutils literal notranslate"><span class="pre">Structure</span></code> 定義のコアーション機構に非常に似ています。その実装は単純に各射影をインスタンスとして定義するものです。</p>
<p>同じ効果を達成するために Existing Instance コマンドを使うことで既存のオブジェクトや構造の射影を宣言することも出来ます。</p>
</div>
</div>
<div class="section" id="summary-of-the-commands">
<h2>コマンドの概要<a class="headerlink" href="#summary-of-the-commands" title="このヘッドラインへのパーマリンク">¶</a></h2>
<dl class="cmd">
<dt id="coq:cmd.class">
<em class="property"><span class="sigannot">Command</span></em> <code class="sig-name descname"><span class="notation"><span>Class</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole">ident</span></a> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-binders"><span class="hole">binders</span></a></span><span class="notation-sup">?</span></span> <span>:</span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-sort"><span class="hole">sort</span></a></span><span class="notation-sup">?</span></span> <span>:=</span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole">ident</span></a></span><span class="notation-sup">?</span></span> <span class="curlies">{ <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole">ident</span></a> <span>:</span><span class="repeat-wrapper"><span class="repeat"><span>&gt;</span></span><span class="notation-sup">?</span></span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-term"><span class="hole">term</span></a></span><span class="notation-sup">+</span><span class="notation-sub">;</span></span> }</span></span></code><a class="headerlink" href="#coq:cmd.class" title="この定義へのパーマリンク">¶</a></dt>
<dd><p><a class="reference internal" href="#coq:cmd.class" title="Class"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Class</span></code></a> コマンドはパラメータ <code class="docutils literal notranslate"><span class="pre">binders</span></code> とレコードフィールドを宣言するフィールドを伴う型クラスの宣言に使われます。</p>
</dd></dl>

<p>類型:</p>
<span class="target" id="singleton-class"></span><dl class="cmd">
<dt>
<em class="property"><span class="sigannot">Command</span></em> <code class="sig-name descname"><span class="notation"><span>Class</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole">ident</span></a> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-binders"><span class="hole">binders</span></a></span><span class="notation-sup">?</span></span> <span>:</span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-sort"><span class="hole">sort</span></a></span><span class="notation-sup">?</span></span> <span>:=</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole">ident</span></a> <span>:</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-term"><span class="hole">term</span></a></span></code></dt>
<dd><p>この類型は単一のメソッドを持つ <em>シングルトン</em> クラスを定義します。このシングルトンクラスはいわゆる定義クラスといわれ、<code class="docutils literal notranslate"><span class="pre">ident</span> <span class="pre">binders</span> <span class="pre">:=</span> <span class="pre">term</span></code> という定義として単純に表現され、そのインスタンスはこの型のオブジェクトそれ自体です。定義クラスはレコードの中に包まれておらず、そのようなクラスのインスタンスの自明な射影はそのインスタンスそれ自身と変換できます。これは簡単に既存のオブジェクトのインスタンスを作り、そして無駄な射影を挿入しないことで証明サイズを縮小するのに便利です。そのクラス定数自身は(訳注: 制約を)解消する間は厳格に決定され、そのためそのクラスの抽象は維持されます。</p>
</dd></dl>

<dl class="cmd">
<dt id="coq:cmd.existing-class">
<em class="property"><span class="sigannot">Command</span></em> <code class="sig-name descname"><span class="notation"><span>Existing</span> <span>Class</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole">ident</span></a></span></code><a class="headerlink" href="#coq:cmd.existing-class" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>この派生形は定数や帰納的定義から事後的にクラスを定義します。メソッドやインスタンスは定義されません。</p>
</dd></dl>

<dl class="cmd">
<dt id="coq:cmd.instance">
<em class="property"><span class="sigannot">Command</span></em> <code class="sig-name descname"><span class="notation"><span>Instance</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole">ident</span></a> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-binders"><span class="hole">binders</span></a></span><span class="notation-sup">?</span></span> <span>:</span> <span>Class</span> <span>t1</span> <span>…</span> <span>tn</span> <span>[|</span> <span>priority]</span> <span>:=</span> <span class="curlies">{ <span>field1</span> <span>:=</span> <span>b1</span> <span>;</span> <span>…;</span> <span>fieldi</span> <span>:=</span> <span>bi</span> }</span></span></code><a class="headerlink" href="#coq:cmd.instance" title="この定義へのパーマリンク">¶</a></dt>
<dd></dd></dl>

<p><a class="reference internal" href="#coq:cmd.instance" title="Instance"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Instance</span></code></a> コマンドは <code class="docutils literal notranslate"><span class="pre">ident</span></code> という名前の型クラスインスタンスを宣言するのに使われます。クラス <a class="reference internal" href="#coq:cmd.class" title="Class"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Class</span></code></a> はパラメータ <code class="docutils literal notranslate"><span class="pre">t1</span></code> から <code class="docutils literal notranslate"><span class="pre">tn</span></code> とフィールド <code class="docutils literal notranslate"><span class="pre">b1</span></code> から <code class="docutils literal notranslate"><span class="pre">bi</span></code> を伴い、各フィールドはそのクラスの宣言されたフィールドでなければなりません。足りないフィールドは対話証明モードで埋められなければなりません。</p>
<p>パラメータ化されたインスタンスを宣言するためにインスタンスの名前の後かつコロンの前に <code class="docutils literal notranslate"><span class="pre">binders</span></code> の任意の文脈を置くことができます。任意に優先度を宣言することが出来、<a class="reference internal" href="../proof-engine/tactics.html#coq:tacn.auto" title="auto"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">auto</span></code></a> ヒントのためのもののように 0 が最高優先度です。優先度が指定されないならば、デフォルトのそのインスタンスの非依存束縛子の数になります。</p>
<dl class="cmdv">
<dt>
<em class="property"><span class="sigannot">Variant</span></em> <code class="sig-name descname"><span class="notation"><span>Instance</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole">ident</span></a> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-binders"><span class="hole">binders</span></a></span><span class="notation-sup">?</span></span> <span>:</span> <span>forall</span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-binders"><span class="hole">binders</span></a></span><span class="notation-sup">?</span></span><span>,</span> <span>Class</span> <span>t1</span> <span>…</span> <span>tn</span> <span>[|</span> <span>priority]</span> <span>:=</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-term"><span class="hole">term</span></a></span></code></dt>
<dd><p>この構文はシングルトンクラスインスタンスの宣言または <code class="docutils literal notranslate"><span class="pre">forall</span> <span class="pre">binders,</span> <span class="pre">Class</span> <span class="pre">t1</span> <span class="pre">…</span> <span class="pre">tn</span></code> 型の明示的な項を直接与えるために使われます。シングルトンクラスについては一意なフィールド名に言及する必要すらありません。</p>
</dd></dl>

<dl class="cmdv">
<dt>
<em class="property"><span class="sigannot">Variant</span></em> <code class="sig-name descname"><span class="notation"><span>Global</span> <span>Instance</span></span></code></dt>
<dd><p><code class="docutils literal notranslate"><span class="pre">Global</span></code> 修飾子はあるセクション中で宣言されたインスタンス上で、それらの一般化されたものがそのセクションが閉じられた後に自動的に再宣言されるように使うことができます。</p>
</dd></dl>

<dl class="cmdv">
<dt id="coq:cmdv.program-instance">
<em class="property"><span class="sigannot">Variant</span></em> <code class="sig-name descname"><span class="notation"><span>Program</span> <span>Instance</span></span></code><a class="headerlink" href="#coq:cmdv.program-instance" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>型検査を Program (章 <a class="reference internal" href="program.html#programs"><span class="std std-ref">Program</span></a>) に切り替え、足りないフィールドを管理する(訳注: 証明)課題機構を使います。</p>
</dd></dl>

<dl class="cmdv">
<dt id="coq:cmdv.declare-instance">
<em class="property"><span class="sigannot">Variant</span></em> <code class="sig-name descname"><span class="notation"><span>Declare</span> <span>Instance</span></span></code><a class="headerlink" href="#coq:cmdv.declare-instance" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このコマンドはあるモジュール型の中で、対応する具体的なインスタンスがこのモジュール型で何らかの実装として存在するべきだということを宣言します。これは <a class="reference internal" href="../language/gallina-specification-language.html#coq:cmd.parameter" title="Parameter"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Parameter</span></code></a> と <a class="reference internal" href="../language/gallina-specification-language.html#coq:cmd.definition" title="Definition"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Definition</span></code></a> または <a class="reference internal" href="../language/gallina-extensions.html#coq:cmd.declare-module" title="Declare Module"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Declare</span> <span class="pre">Module</span></code></a> と <a class="reference internal" href="../language/gallina-extensions.html#coq:cmd.module" title="Module"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Module</span></code></a> の差異に似ています。</p>
</dd></dl>

<p><a class="reference internal" href="#coq:cmd.class" title="Class"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Class</span></code></a> と <a class="reference internal" href="#coq:cmd.instance" title="Instance"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Instance</span></code></a> Vernacular コマンドの他に、型クラスに関連するコマンドがいくつかあります。</p>
<dl class="cmd">
<dt id="coq:cmd.existing-instance">
<em class="property"><span class="sigannot">Command</span></em> <code class="sig-name descname"><span class="notation"><span>Existing</span> <span>Instance</span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole">ident</span></a></span><span class="notation-sup">+</span></span> <span>[|</span> <span>priority]</span></span></code><a class="headerlink" href="#coq:cmd.existing-instance" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このコマンドは定数の任意のリストを任意に優先度を伴ってインスタンスデータベースへ追加します。その型は適用された型クラスで終わります。それはセクションの終わりでインスタンスを再宣言したり、または構造の射影をインスタンスとして宣言するのに使えます。これは <a class="reference internal" href="generalized-rewriting.html#coq:cmd.print-instances" title="Print Instances"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Print</span> <span class="pre">Instances</span></code></a> できるインスタンスを登録することを除いて <code class="docutils literal notranslate"><span class="pre">Hint</span> <span class="pre">Resolve</span> <span class="pre">ident</span> <span class="pre">:</span> <span class="pre">typeclass_instances</span></code> に相当します。</p>
</dd></dl>

<dl class="cmd">
<dt id="coq:cmd.context">
<em class="property"><span class="sigannot">Command</span></em> <code class="sig-name descname"><span class="notation"><span>Context</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-binders"><span class="hole">binders</span></a></span></code><a class="headerlink" href="#coq:cmd.context" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>与えられた束縛コンテキストに従って変数を宣言します。それは <a class="reference internal" href="../language/gallina-extensions.html#implicit-generalization"><span class="std std-ref">暗黙の一般化</span></a> を使うかもしれません。</p>
</dd></dl>

<dl class="tacn">
<dt id="coq:tacn.typeclasses-eauto">
<code class="sig-name descname"><span class="notation"><span>typeclasses</span> <span>eauto</span></span></code><a class="headerlink" href="#coq:tacn.typeclasses-eauto" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このタクティックは <a class="reference internal" href="../proof-engine/tactics.html#coq:tacn.eauto" title="eauto"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">eauto</span></code></a> や <a class="reference internal" href="../proof-engine/tactics.html#coq:tacn.auto" title="auto"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">auto</span></code></a> と異なる(訳注: 制約)解消エンジンを使います。主な違いは以下です:</p>
<ul>
<li><p><a class="reference internal" href="../proof-engine/tactics.html#coq:tacn.eauto" title="eauto"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">eauto</span></code></a> や <a class="reference internal" href="../proof-engine/tactics.html#coq:tacn.auto" title="auto"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">auto</span></code></a> と逆に、(Coq 8.6 を基点として) 新しい証明エンジンの中で全体が完了します、依存サブゴールの中でバックトラッキングが可能で、かつゴールの見送りがサポートされていることを意味します。<code class="docutils literal notranslate"><span class="pre">typeclasses</span> <span class="pre">eauto</span></code> はマルチゴールタクティックです。それは完全に独立したサブゴール上でのバックトラッキングを避けるため、サブゴール間の依存を解析します。</p></li>
<li><p>引数なしで呼ばれたときは、<code class="docutils literal notranslate"><span class="pre">typeclasses</span> <span class="pre">eauto</span></code> はデフォルトで (コアの替わりに) <code class="docutils literal notranslate"><span class="pre">typeclass_instances</span></code> データベースを使います。依存サブゴールは自動的に先送りにされ、先送りされたゴールは (Coq 8.5 の振る舞いに従うと) 解消終了の後まで残ることがあります。</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>Coq 8.6 を基点として、 <code class="docutils literal notranslate"><span class="pre">all:once</span> <span class="pre">(typeclasses</span> <span class="pre">eauto)</span></code> は宣言されたクラスサブゴール <em>だけ</em> が型推論中に解消の開始と考えられる場合を除き、精細化/型推論の間にそれが呼ばれたとき型クラス解決の間に何が起きるかを忠実に模倣し、一方 <code class="docutils literal notranslate"><span class="pre">all</span></code> は非クラスサブゴールを選択できる。精細化エンジンがバックトラック出来るようになったとき未来のバージョンではそれは <code class="docutils literal notranslate"><span class="pre">all:typeclasses</span> <span class="pre">eauto</span></code> に移動するかもしれない。</p>
</div>
</li>
<li><p>特定のデータベース (例. with) を伴って呼ばれたとき、<code class="docutils literal notranslate"><span class="pre">typeclasses</span> <span class="pre">eauto</span></code> は先送りにされたゴールを検索中のどの時点でもとどまることを許し、型クラスゴールを他と同じように扱います。</p></li>
<li><p>データベースの透過性情報はそれらの中で定義された全てのヒントと一貫して使用されます。それは単一化器を呼ぶときに常に使われます。局所的な仮定を考えるとき、我々は与えられた最初のヒントデータベースの透過性状態を使います。展開可能変数と定数を伴う (例えば <a class="reference internal" href="../proof-engine/tactics.html#coq:cmd.create-hintdb" title="Create HintDb"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Create</span> <span class="pre">HintDb</span></code></a> で作成された) 空のデータベースを <code class="docutils literal notranslate"><span class="pre">typeclasses</span> <span class="pre">eauto</span></code> の最初の引数として使い、従って単一化の間、局所的な仮定を使う解消に完全変換を使わせます。</p></li>
</ul>
<dl class="cmdv">
<dt>
<em class="property"><span class="sigannot">Variant</span></em> <code class="sig-name descname"><span class="notation"><span>typeclasses</span> <span>eauto</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-num"><span class="hole">num</span></a></span></code></dt>
<dd><div class="admonition warning">
<p class="admonition-title">警告</p>
<p><code class="docutils literal notranslate"><span class="notation"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-num"><span class="hole"><span class="pre">num</span></span></a></span></code> 制限の意味は auto と異なります。デフォルトでは、制限が与えられないならば検索は制限されません。<a class="reference internal" href="../proof-engine/tactics.html#coq:tacn.auto" title="auto"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">auto</span></code></a> と異なり、導入ステップは数えられ、その結果として <a class="reference internal" href="../proof-engine/tactics.html#coq:tacn.auto" title="auto"><code class="xref coq coq-tacn docutils literal notranslate"><span class="pre">auto</span></code></a> より <code class="docutils literal notranslate"><span class="pre">typeclasses</span> <span class="pre">eauto</span></code> による検索の時はより大きい制限が必要とされるかもしれません。</p>
</div>
</dd></dl>

<dl class="cmdv">
<dt>
<em class="property"><span class="sigannot">Variant</span></em> <code class="sig-name descname"><span class="notation"><span>typeclasses</span> <span>eauto</span> <span>with</span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole">ident</span></a></span><span class="notation-sup">+</span></span></span></code></dt>
<dd><p>この派生形は与えられたヒントデータベースでの解消を実行します。それは型クラスサブゴールを他のサブゴールと同じに扱います (特に非型クラスゴールに先送りがないときは)。</p>
</dd></dl>

</dd></dl>

<dl class="tacn">
<dt id="coq:tacn.autoapply">
<code class="sig-name descname"><span class="notation"><span>autoapply</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-term"><span class="hole">term</span></a> <span>with</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole">ident</span></a></span></code><a class="headerlink" href="#coq:tacn.autoapply" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>タクティック <code class="docutils literal notranslate"><span class="pre">autoapply</span></code> はヒントデータベース ident の透過性情報を使用し term を適用し、型クラス解決は <em>行いません</em>。これは <a class="reference internal" href="../proof-engine/tactics.html#coq:cmdv.hint-extern" title="Hint Extern"><code class="xref coq coq-cmd docutils literal notranslate"><span class="pre">Hint</span> <span class="pre">Extern</span></code></a> の中で (ヒントデータベース <code class="docutils literal notranslate"><span class="pre">typeclass_instances</span></code> の中の) 型クラスインスタンスのために、ヒントの適用時にローカルに型クラス解決を行うよりむしろ補題の適用によって作られた型クラスサブゴール上でバックトラッキングを許すために使うことができます。</p>
</dd></dl>

<div class="section" id="typeclasses-transparent-typclasses-opaque">
<span id="typeclassestransparent"></span><h3>透明な型クラス、不透明な型クラス<a class="headerlink" href="#typeclasses-transparent-typclasses-opaque" title="このヘッドラインへのパーマリンク">¶</a></h3>
<dl class="cmd">
<dt id="coq:cmd.typeclasses-transparent">
<em class="property"><span class="sigannot">Command</span></em> <code class="sig-name descname"><span class="notation"><span>Typeclasses</span> <span>Transparent</span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole">ident</span></a></span><span class="notation-sup">+</span></span></span></code><a class="headerlink" href="#coq:cmd.typeclasses-transparent" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このコマンドは型クラス解決の間識別子を透明にします。</p>
</dd></dl>

<dl class="cmd">
<dt id="coq:cmd.typeclasses-opaque">
<em class="property"><span class="sigannot">Command</span></em> <code class="sig-name descname"><span class="notation"><span>Typeclasses</span> <span>Opaque</span> <span class="repeat-wrapper"><span class="repeat"><a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-ident"><span class="hole">ident</span></a></span><span class="notation-sup">+</span></span></span></code><a class="headerlink" href="#coq:cmd.typeclasses-opaque" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>型クラス検索のために識別子を不透明にします。いくつかの定数がいくらかの単一化を防ぎ、(訳注: 型クラス)解決を失敗させるのに便利です。それは不動点や省略形のように見えない何かのような証明探索中にけっして展開されるべきではない定数を宣言するのにも便利です。これはさらにそのような固定的な定数によってインデックス出来る型クラスマップによって証明探索を高速化出来ます (see <a class="reference internal" href="../proof-engine/tactics.html#thehintsdatabasesforautoandeauto"><span class="std std-ref">The hints databases for auto and eauto</span></a>)。</p>
</dd></dl>

<p>デフォルトでは、全ての定数と局所変数は透明とみなされます。以下のような、型を省略するために使われる定数を不透明にしないように注意するべきです:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>relation A := A -&gt; A -&gt; Prop.
</pre></div>
</div>
<p>これは <code class="docutils literal notranslate"><span class="pre">Hint</span> <span class="pre">Transparent,</span> <span class="pre">Opaque</span> <span class="pre">ident</span> <span class="pre">:</span> <span class="pre">typeclass_instances</span></code> に相当します。(訳注: 相当しません)</p>
</div>
<div class="section" id="options">
<h3>Options<a class="headerlink" href="#options" title="このヘッドラインへのパーマリンク">¶</a></h3>
<dl class="flag">
<dt id="coq:flag.typeclasses-dependency-order">
<em class="property"><span class="sigannot">Flag</span></em> <code class="sig-name descname"><span class="notation"><span>Typeclasses</span> <span>Dependency</span> <span>Order</span></span></code><a class="headerlink" href="#coq:flag.typeclasses-dependency-order" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このオプション (8.6 からデフォルトで有効になった) はサブゴール間の依存順序を遵守し、その意味するところは、以前 (Coq 8.5 以下) では他のサブゴールが依存するサブゴールが優先され、一方非依存サブゴールは依存するもの前に置かれるということです。これは極めて異なった証明探索の性能挙動を示します。</p>
</dd></dl>

<dl class="flag">
<dt id="coq:flag.typeclasses-filtered-unification">
<em class="property"><span class="sigannot">Flag</span></em> <code class="sig-name descname"><span class="notation"><span>Typeclasses</span> <span>Filtered</span> <span>Unification</span></span></code><a class="headerlink" href="#coq:flag.typeclasses-filtered-unification" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このオプションは Coq 8.6 から使用可能でデフォルトで無効にされており、ヒント適用手続き filter-then-unify 戦略に切り替えます。ヒントを適用するため、まずそのゴールが推論やそのヒントによって指定されたパターンに構文的に <em>マッチする</em> かを検査し、そうなってはじめてそのヒントの結論とゴールを <em>単一化</em> しようと試みます。これは単一化を呼ぶ頻度が低くなることで劇的にパフォーマンスを改善でき、構文的パターンへのマッチングが非常に高速になります。これはインスタンスを持ち出すことに関して更なる制御性を提供します。例えばある定数を、その場所にホールがあるゴール上でけっして適用させないパターン中に明示的に出現することを強制します。</p>
</dd></dl>

<dl class="flag">
<dt id="coq:flag.typeclasses-limit-intros">
<em class="property"><span class="sigannot">Flag</span></em> <code class="sig-name descname"><span class="notation"><span>Typeclasses</span> <span>Limit</span> <span>Intros</span></span></code><a class="headerlink" href="#coq:flag.typeclasses-limit-intros" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このオプション (デフォルトで有効) は一般的な証明項の中で (関数的な) イータ展開を避けながらヒントを適用する能力を制御します。それはある積の中で直接マッチする積を伴うゴールにイントロダクションを避けて適用すると結論を出すヒントを認めることで行います。</p>
<div class="admonition warning">
<p class="admonition-title">警告</p>
<p>これはヒント節の動的な再構築を要求するため高価になりえます、そして積の導入規則の反転可能性から恩恵を得られず、結果として証明探索がより高価になる (つまり、よりバックトラッキングが役に立たなくなる) 可能性があります 。</p>
</div>
</dd></dl>

<dl class="flag">
<dt id="coq:flag.typeclass-resolution-for-conversion">
<em class="property"><span class="sigannot">Flag</span></em> <code class="sig-name descname"><span class="notation"><span>Typeclass</span> <span>Resolution</span> <span>For</span> <span>Conversion</span></span></code><a class="headerlink" href="#coq:flag.typeclass-resolution-for-conversion" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このオプション (デフォルトで有効) は精緻化/型推論の間に単一化問題が解決できない時に型クラス解決の使用を制御します。このオプションが有効なことにより、単一化が失敗したとき、再度単一化を起動する前に型クラス解決が試行されます。</p>
</dd></dl>

<dl class="flag">
<dt id="coq:flag.typeclasses-strict-resolution">
<em class="property"><span class="sigannot">Flag</span></em> <code class="sig-name descname"><span class="notation"><span>Typeclasses</span> <span>Strict</span> <span>Resolution</span></span></code><a class="headerlink" href="#coq:flag.typeclasses-strict-resolution" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このオプションが設定されたときに導入された型クラス宣言はより厳密な解決時の振る舞いを持ちます。(このオプションはデフォルトで無効です)このクラスのインスタンスによりゴールの単一化を求めている時、そのゴールに現れる全ての存在量化された変数を &quot;凍結&quot; します。これは単一化の間固定され、インスタンス化できないと見なされることを意味しています。</p>
</dd></dl>

<dl class="flag">
<dt id="coq:flag.typeclasses-unique-solutions">
<em class="property"><span class="sigannot">Flag</span></em> <code class="sig-name descname"><span class="notation"><span>Typeclasses</span> <span>Unique</span> <span>Solutions</span></span></code><a class="headerlink" href="#coq:flag.typeclasses-unique-solutions" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>型クラス解決が起きた時、それが単一の解を持たないならば失敗することを保証します。これはその解が正準であることを保証しますが、証明探索はより高価になりえます。</p>
</dd></dl>

<dl class="flag">
<dt id="coq:flag.typeclasses-unique-instances">
<em class="property"><span class="sigannot">Flag</span></em> <code class="sig-name descname"><span class="notation"><span>Typeclasses</span> <span>Unique</span> <span>Instances</span></span></code><a class="headerlink" href="#coq:flag.typeclasses-unique-instances" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このオプションが設定された時に導入された型クラス宣言は、より効率的な解決時の振る舞いを持っています。(このオプションはデフォルトで無効です)。このクラスの型クラスゴールの解が見つかったとき、けっしてバックトラックを行わず、それが正準であると仮定します。</p>
</dd></dl>

<dl class="flag">
<dt id="coq:flag.typeclasses-debug">
<em class="property"><span class="sigannot">Flag</span></em> <code class="sig-name descname"><span class="notation"><span>Typeclasses</span> <span>Debug</span></span></code><a class="headerlink" href="#coq:flag.typeclasses-debug" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>型クラス解決のステップが検索中に表示されるかどうかを制御します。またこのフラグは <a class="reference internal" href="#coq:opt.typeclasses-debug-verbosity" title="Typeclasses Debug Verbosity"><code class="xref coq coq-opt docutils literal notranslate"><span class="pre">Typeclasses</span> <span class="pre">Debug</span> <span class="pre">Verbosity</span></code></a> を 1 に設定します。</p>
</dd></dl>

<dl class="opt">
<dt id="coq:opt.typeclasses-debug-verbosity">
<em class="property"><span class="sigannot">Option</span></em> <code class="sig-name descname"><span class="notation"><span>Typeclasses</span> <span>Debug</span> <span>Verbosity</span> <a class="reference internal" href="../language/gallina-specification-language.html#grammar-token-num"><span class="hole">num</span></a></span></code><a class="headerlink" href="#coq:opt.typeclasses-debug-verbosity" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>どれくらいの情報が型クラス解決のステップが検索中に表示されるかを決定します。1 はデフォルトレベルです。2 は追加の情報を表示します。例えばタクティックやゴールの先送りなどです。このオプションを設定すると <a class="reference internal" href="#coq:flag.typeclasses-debug" title="Typeclasses Debug"><code class="xref coq coq-flag docutils literal notranslate"><span class="pre">Typeclasses</span> <span class="pre">Debug</span></code></a> も設定します。</p>
</dd></dl>

<dl class="flag">
<dt id="coq:flag.refine-instance-mode">
<em class="property"><span class="sigannot">Flag</span></em> <code class="sig-name descname"><span class="notation"><span>Refine</span> <span>Instance</span> <span>Mode</span></span></code><a class="headerlink" href="#coq:flag.refine-instance-mode" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このオプションは Instance コマンドを通じて行われるインスタンス宣言の振る舞いの切り替えるを認めます。</p>
<ul class="simple">
<li><p>それが有効 (デフォルト) なとき、証明項に未解決のホールがあるインスタンスは残っている証明課題を伴って証明モードを開きます。</p></li>
<li><p>無効なときは、替わりにエラーを伴って失敗します。</p></li>
</ul>
</dd></dl>

</div>
<div class="section" id="typeclasses-eauto">
<h3>型クラスの eauto <cite>:=</cite><a class="headerlink" href="#typeclasses-eauto" title="このヘッドラインへのパーマリンク">¶</a></h3>
<dl class="cmd">
<dt id="coq:cmd.typeclasses-eauto">
<em class="property"><span class="sigannot">Command</span></em> <code class="sig-name descname"><span class="notation"><span>Typeclasses</span> <span>eauto</span> <span>:=</span> <span class="repeat-wrapper"><span class="repeat"><span>debug</span></span><span class="notation-sup">?</span></span> <span class="repeat-wrapper"><span class="repeat"><span class="curlies">{<span>dfs</span> <span>|</span> <span>bfs</span>}</span></span><span class="notation-sup">?</span></span> <span>depth</span></span></code><a class="headerlink" href="#coq:cmd.typeclasses-eauto" title="この定義へのパーマリンク">¶</a></dt>
<dd><p>このコマンドは型クラス解決タクティックのより広範囲のカスタマイズを行います。オプションの意味は:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">debug</span></code> デバッグモードでは、成功裏に適用されたタクティックのトレースが表示されます。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dfs,</span> <span class="pre">bfs</span></code> これは検索戦略を深さ優先探索 (デフォルト) または幅優先探索に設定します。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">depth</span></code> これはその検索の深さ制限を設定します。</p></li>
</ul>
</dd></dl>

</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="omega.html" class="btn btn-neutral float-right" title="Omega: a solver for quantifier-free problems in Presburger Arithmetic" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="canonical-structures.html" class="btn btn-neutral float-left" title="正準構造" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 1999-2018, Inria

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>