

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="ja" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="ja" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Utilities &mdash; Coq 8.8.2 ドキュメント</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
        <script type="text/javascript" src="../_static/notations.js"></script>
        <script type="text/javascript" src="../_static/translations.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/fonts.css" type="text/css" />
  <link rel="stylesheet" href="../_static/ansi.css" type="text/css" />
  <link rel="stylesheet" href="../_static/coqdoc.css" type="text/css" />
  <link rel="stylesheet" href="../_static/notations.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pre-text.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="検索" href="../search.html" />
    <link rel="next" title="Coq Integrated Development Environment" href="coqide.html" />
    <link rel="prev" title="The Coq commands" href="coq-commands.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Coq
          

          
          </a>

          
            
            
              <div class="version">
                8.8.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">索引</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../genindex.html">Index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coq-cmdindex.html">Command index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coq-tacindex.html">Tactic index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coq-optindex.html">Flags, options and tables index</a></li>
<li class="toctree-l1"><a class="reference internal" href="../coq-exnindex.html">Errors and warnings index</a></li>
</ul>
<p class="caption"><span class="caption-text">はじめに</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">はじめに</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">Credits</a></li>
</ul>
<p class="caption"><span class="caption-text">言語</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../language/gallina-specification-language.html">仕様記述言語 Gallina</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/gallina-extensions.html"><span class="smallcaps">Gallina</span> の拡張</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/coq-library.html">The <span class="smallcaps">Coq</span> library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/cic.html">Calculus of Inductive Constructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../language/module-system.html">The Module System</a></li>
</ul>
<p class="caption"><span class="caption-text">証明エンジン</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/vernacular-commands.html">Vernacular commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/proof-handling.html">Proof handling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/tactics.html">Tactics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/ltac.html">The tactic language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/detailed-tactic-examples.html">Detailed examples of tactics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../proof-engine/ssreflect-proof-language.html">The <span class="smallcaps">SSReflect</span> proof language</a></li>
</ul>
<p class="caption"><span class="caption-text">ユーザ拡張</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../user-extensions/syntax-extensions.html">Syntax extensions and interpretation scopes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../user-extensions/proof-schemes.html">Proof schemes</a></li>
</ul>
<p class="caption"><span class="caption-text">実用ツール</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="coq-commands.html">The <span class="smallcaps">Coq</span> commands</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Utilities</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#using-coq-as-a-library">Using Coq as a library</a></li>
<li class="toctree-l2"><a class="reference internal" href="#building-a-coq-project-with-coq-makefile">Building a <span class="smallcaps">Coq</span> project with coq_makefile</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#coqmakefile-local">CoqMakefile.local</a></li>
<li class="toctree-l3"><a class="reference internal" href="#timing-targets-and-performance-testing">Timing targets and performance testing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reusing-extending-the-generated-makefile">Reusing/extending the generated Makefile</a></li>
<li class="toctree-l3"><a class="reference internal" href="#building-a-subset-of-the-targets-with-j">Building a subset of the targets with <code class="docutils literal notranslate"><span class="pre">-j</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-dependencies">Module dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="#documenting-coq-files-with-coqdoc">Documenting <span class="smallcaps">Coq</span> files with coqdoc</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#principles">Principles</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#coq-material-inside-documentation"><span class="smallcaps">Coq</span> material inside documentation.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pretty-printing">Pretty-printing.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#sections">Sections</a></li>
<li class="toctree-l4"><a class="reference internal" href="#lists">Lists.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rules">Rules.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#emphasis">Emphasis.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#escaping-to-latex-and-html">Escaping to <span class="smallcaps">LaTeX</span> and HTML.</a></li>
<li class="toctree-l4"><a class="reference internal" href="#verbatim">Verbatim</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hyperlinks">Hyperlinks</a></li>
<li class="toctree-l4"><a class="reference internal" href="#hiding-showing-parts-of-the-source">Hiding / Showing parts of the source.</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#usage">Usage</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#command-line-options">Command line options</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#the-coqdoc-latex-style-file">The coqdoc <span class="smallcaps">LaTeX</span> style file</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#embedded-coq-phrases-inside-latex-documents">Embedded Coq phrases inside <span class="smallcaps">LaTeX</span> documents</a></li>
<li class="toctree-l2"><a class="reference internal" href="#coq-and-gnu-emacs"><span class="smallcaps">Coq</span> and GNU Emacs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-coq-emacs-mode">The <span class="smallcaps">Coq</span> Emacs mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#proof-general">Proof-General</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#module-specification">Module specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="#man-pages">Man pages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="coqide.html"><span class="smallcaps">Coq</span> Integrated Development Environment</a></li>
</ul>
<p class="caption"><span class="caption-text">付録</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../addendum/extended-pattern-matching.html">Extended pattern matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/implicit-coercions.html">Implicit Coercions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/canonical-structures.html">正準構造</a></li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/type-classes.html">型クラス</a></li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/omega.html">Omega: a solver for quantifier-free problems in Presburger Arithmetic</a></li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/micromega.html">Micromega: tactics for solving arithmetic goals over ordered rings</a></li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/extraction.html">Extraction of programs in <span class="smallcaps">OCaml</span> and Haskell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/program.html">Program</a></li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/ring.html">The ring and field tactic families</a></li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/nsatz.html">Nsatz: tactics for proving equalities in integral domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/generalized-rewriting.html">Generalized rewriting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/parallel-proof-processing.html">Asynchronous and Parallel Proof Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/miscellaneous-extensions.html">Miscellaneous extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../addendum/universe-polymorphism.html">Polymorphic Universes</a></li>
</ul>
<p class="caption"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../zebibliography.html">Bibliography</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Coq</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>Utilities</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            
              <a href="https://github.com/coq/coq/blob/master/doc/sphinx/practical-tools/utilities.rst" class="fa fa-github"> Edit on GitHub</a>
            
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="math-preamble math notranslate nohighlight">
\[\begin{split}\newcommand{\alors}{\textsf{then}}
\newcommand{\alter}{\textsf{alter}}
\newcommand{\as}{\kw{as}}
\newcommand{\Assum}[3]{\kw{Assum}(#1)(#2:#3)}
\newcommand{\bool}{\textsf{bool}}
\newcommand{\case}{\kw{case}}
\newcommand{\conc}{\textsf{conc}}
\newcommand{\cons}{\textsf{cons}}
\newcommand{\consf}{\textsf{consf}}
\newcommand{\conshl}{\textsf{cons\_hl}}
\newcommand{\Def}[4]{\kw{Def}(#1)(#2:=#3:#4)}
\newcommand{\emptyf}{\textsf{emptyf}}
\newcommand{\End}{\kw{End}}
\newcommand{\kwend}{\kw{end}}
\newcommand{\EqSt}{\textsf{EqSt}}
\newcommand{\even}{\textsf{even}}
\newcommand{\evenO}{\textsf{even}_\textsf{O}}
\newcommand{\evenS}{\textsf{even}_\textsf{S}}
\newcommand{\false}{\textsf{false}}
\newcommand{\filter}{\textsf{filter}}
\newcommand{\Fix}{\kw{Fix}}
\newcommand{\fix}{\kw{fix}}
\newcommand{\for}{\textsf{for}}
\newcommand{\forest}{\textsf{forest}}
\newcommand{\from}{\textsf{from}}
\newcommand{\Functor}{\kw{Functor}}
\newcommand{\haslength}{\textsf{has\_length}}
\newcommand{\hd}{\textsf{hd}}
\newcommand{\ident}{\textsf{ident}}
\newcommand{\In}{\kw{in}}
\newcommand{\Ind}[4]{\kw{Ind}[#2](#3:=#4)}
\newcommand{\ind}[3]{\kw{Ind}~[#1]\left(#2\mathrm{~:=~}#3\right)}
\newcommand{\Indp}[5]{\kw{Ind}_{#5}(#1)[#2](#3:=#4)}
\newcommand{\Indpstr}[6]{\kw{Ind}_{#5}(#1)[#2](#3:=#4)/{#6}}
\newcommand{\injective}{\kw{injective}}
\newcommand{\kw}[1]{\textsf{#1}}
\newcommand{\lb}{\lambda}
\newcommand{\length}{\textsf{length}}
\newcommand{\letin}[3]{\kw{let}~#1:=#2~\kw{in}~#3}
\newcommand{\List}{\textsf{list}}
\newcommand{\lra}{\longrightarrow}
\newcommand{\Match}{\kw{match}}
\newcommand{\Mod}[3]{{\kw{Mod}}({#1}:{#2}\,\zeroone{:={#3}})}
\newcommand{\ModA}[2]{{\kw{ModA}}({#1}=={#2})}
\newcommand{\ModS}[2]{{\kw{Mod}}({#1}:{#2})}
\newcommand{\ModType}[2]{{\kw{ModType}}({#1}:={#2})}
\newcommand{\mto}{.\;}
\newcommand{\Nat}{\mathbb{N}}
\newcommand{\nat}{\textsf{nat}}
\newcommand{\Nil}{\textsf{nil}}
\newcommand{\nilhl}{\textsf{nil\_hl}}
\newcommand{\nO}{\textsf{O}}
\newcommand{\node}{\textsf{node}}
\newcommand{\nS}{\textsf{S}}
\newcommand{\odd}{\textsf{odd}}
\newcommand{\oddS}{\textsf{odd}_\textsf{S}}
\newcommand{\ovl}[1]{\overline{#1}}
\newcommand{\Pair}{\textsf{pair}}
\newcommand{\Prod}{\textsf{prod}}
\newcommand{\Prop}{\textsf{Prop}}
\newcommand{\return}{\kw{return}}
\newcommand{\Set}{\textsf{Set}}
\newcommand{\si}{\textsf{if}}
\newcommand{\sinon}{\textsf{else}}
\newcommand{\Sort}{\cal S}
\newcommand{\Str}{\textsf{Stream}}
\newcommand{\Struct}{\kw{Struct}}
\newcommand{\subst}[3]{#1\{#2/#3\}}
\newcommand{\tl}{\textsf{tl}}
\newcommand{\tree}{\textsf{tree}}
\newcommand{\true}{\textsf{true}}
\newcommand{\Type}{\textsf{Type}}
\newcommand{\unfold}{\textsf{unfold}}
\newcommand{\WEV}[3]{\mbox{$#1[] \vdash #2 \lra  #3$}}
\newcommand{\WEVT}[3]{\mbox{$#1[] \vdash #2 \lra$}\\ \mbox{$ #3$}}
\newcommand{\WF}[2]{{\cal W\!F}(#1)[#2]}
\newcommand{\WFE}[1]{\WF{E}{#1}}
\newcommand{\WFT}[2]{#1[] \vdash {\cal W\!F}(#2)}
\newcommand{\WFTWOLINES}[2]{{\cal W\!F}\begin{array}{l}(#1)\\\mbox{}[{#2}]\end{array}}
\newcommand{\with}{\kw{with}}
\newcommand{\WS}[3]{#1[] \vdash #2 &lt;: #3}
\newcommand{\WSE}[2]{\WS{E}{#1}{#2}}
\newcommand{\WT}[4]{#1[#2] \vdash #3 : #4}
\newcommand{\WTE}[3]{\WT{E}{#1}{#2}{#3}}
\newcommand{\WTEG}[2]{\WTE{\Gamma}{#1}{#2}}
\newcommand{\WTM}[3]{\WT{#1}{}{#2}{#3}}
\newcommand{\zeroone}[1]{[{#1}]}
\newcommand{\zeros}{\textsf{zeros}}
\end{split}\]</div>
<div class="section" id="utilities">
<span id="id1"></span><h1>Utilities<a class="headerlink" href="#utilities" title="このヘッドラインへのパーマリンク">¶</a></h1>
<p>The distribution provides utilities to simplify some tedious works
beside proof development, tactics writing or documentation.</p>
<div class="section" id="using-coq-as-a-library">
<h2>Using Coq as a library<a class="headerlink" href="#using-coq-as-a-library" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>In previous versions, <code class="docutils literal notranslate"><span class="pre">coqmktop</span></code> was used to build custom
toplevels - for example for better debugging or custom static
linking. Nowadays, the preferred method is to use <code class="docutils literal notranslate"><span class="pre">ocamlfind</span></code>.</p>
<p>The most basic custom toplevel is built using:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>% ocamlfind ocamlopt -thread -rectypes -linkall -linkpkg \
              -package coq.toplevel \
               toplevel/coqtop\_bin.ml -o my\_toplevel.native
</pre></div>
</div>
<p>For example, to statically link <cite>L</cite><sub>tac</sub>, you can just do:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>% ocamlfind ocamlopt -thread -rectypes -linkall -linkpkg \
              -package coq.toplevel -package coq.ltac \
              toplevel/coqtop\_bin.ml -o my\_toplevel.native
</pre></div>
</div>
<p>and similarly for other plugins.</p>
</div>
<div class="section" id="building-a-coq-project-with-coq-makefile">
<h2>Building a <span class="smallcaps">Coq</span> project with coq_makefile<a class="headerlink" href="#building-a-coq-project-with-coq-makefile" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>The majority of <span class="smallcaps">Coq</span> projects are very similar: a collection of <code class="docutils literal notranslate"><span class="pre">.v</span></code>
files and eventually some <code class="docutils literal notranslate"><span class="pre">.ml</span></code> ones (a <span class="smallcaps">Coq</span> plugin). The main piece of
metadata needed in order to build the project are the command line
options to <code class="docutils literal notranslate"><span class="pre">coqc</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">-R</span></code>, <code class="docutils literal notranslate"><span class="pre">-I</span></code>, see also: section
<a class="reference internal" href="coq-commands.html#command-line-options"><span class="std std-ref">By command line options</span></a>). Collecting the list of files and options is the job
of the <code class="docutils literal notranslate"><span class="pre">_CoqProject</span></code> file.</p>
<p>A simple example of a <code class="docutils literal notranslate"><span class="pre">_CoqProject</span></code> file follows:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>-R theories/ MyCode
theories/foo.v
theories/bar.v
-I src/
src/baz.ml4
src/bazaux.ml
src/qux_plugin.mlpack
</pre></div>
</div>
<p>Currently, both <span class="smallcaps">CoqIDE</span> and Proof-General (version ≥ <code class="docutils literal notranslate"><span class="pre">4.3pre</span></code>)
understand <code class="docutils literal notranslate"><span class="pre">_CoqProject</span></code> files and invoke <span class="smallcaps">Coq</span> with the desired options.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">coq_makefile</span></code> utility can be used to set up a build infrastructure
for the <span class="smallcaps">Coq</span> project based on makefiles. The recommended way of
invoking <code class="docutils literal notranslate"><span class="pre">coq_makefile</span></code> is the following one:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>coq_makefile -f _CoqProject -o CoqMakefile
</pre></div>
</div>
<p>Such command generates the following files:</p>
<dl class="simple">
<dt>CoqMakefile</dt><dd><p>is a generic makefile for <code class="docutils literal notranslate"><span class="pre">GNU</span> <span class="pre">Make</span></code> that provides
targets to build the project (both <code class="docutils literal notranslate"><span class="pre">.v</span></code> and <code class="docutils literal notranslate"><span class="pre">.ml*</span></code> files), to install it
system-wide in the <code class="docutils literal notranslate"><span class="pre">coq-contrib</span></code> directory (i.e. where <span class="smallcaps">Coq</span> is installed)
as well as to invoke coqdoc to generate HTML documentation.</p>
</dd>
<dt>CoqMakefile.conf</dt><dd><p>contains make variables assignments that reflect
the contents of the <code class="docutils literal notranslate"><span class="pre">_CoqProject</span></code> file as well as the path relevant to
<span class="smallcaps">Coq</span>.</p>
</dd>
</dl>
<p>An optional file <code class="docutils literal notranslate"><span class="pre">CoqMakefile.local</span></code> can be provided by the user in order to
extend <code class="docutils literal notranslate"><span class="pre">CoqMakefile</span></code>. In particular one can declare custom actions to be
performed before or after the build process. Similarly one can customize the
install target or even provide new targets. Extension points are documented in
paragraph <a class="reference internal" href="#coqmakefilelocal"><span class="std std-ref">CoqMakefile.local</span></a>.</p>
<p>The extensions of the files listed in <code class="docutils literal notranslate"><span class="pre">_CoqProject</span></code> is used in order to
decide how to build them. In particular:</p>
<ul class="simple">
<li><p><span class="smallcaps">Coq</span> files must use the <code class="docutils literal notranslate"><span class="pre">.v</span></code> extension</p></li>
<li><p><span class="smallcaps">OCaml</span> files must use the <code class="docutils literal notranslate"><span class="pre">.ml</span></code> or <code class="docutils literal notranslate"><span class="pre">.mli</span></code> extension</p></li>
<li><p><span class="smallcaps">OCaml</span> files that require pre processing for syntax
extensions (like <code class="docutils literal notranslate"><span class="pre">VERNAC</span> <span class="pre">EXTEND</span></code>) must use the <code class="docutils literal notranslate"><span class="pre">.ml4</span></code> extension</p></li>
<li><p>In order to generate a plugin one has to list all <span class="smallcaps">OCaml</span>
modules (i.e. <code class="docutils literal notranslate"><span class="pre">Baz</span></code> for <code class="docutils literal notranslate"><span class="pre">baz.ml</span></code>) in a <code class="docutils literal notranslate"><span class="pre">.mlpack</span></code> file (or <code class="docutils literal notranslate"><span class="pre">.mllib</span></code>
file).</p></li>
</ul>
<p>The use of <code class="docutils literal notranslate"><span class="pre">.mlpack</span></code> files has to be preferred over <code class="docutils literal notranslate"><span class="pre">.mllib</span></code> files,
since it results in a “packed” plugin: All auxiliary modules (as
<code class="docutils literal notranslate"><span class="pre">Baz</span></code> and <code class="docutils literal notranslate"><span class="pre">Bazaux</span></code>) are hidden inside the plugin’s &quot;namespace&quot;
(<code class="docutils literal notranslate"><span class="pre">Qux_plugin</span></code>). This reduces the chances of begin unable to load two
distinct plugins because of a clash in their auxiliary module names.</p>
<div class="section" id="coqmakefile-local">
<span id="coqmakefilelocal"></span><h3>CoqMakefile.local<a class="headerlink" href="#coqmakefile-local" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>The optional file <code class="docutils literal notranslate"><span class="pre">CoqMakefile.local</span></code> is included by the generated
file <code class="docutils literal notranslate"><span class="pre">CoqMakefile</span></code>. It can contain two kinds of directives.</p>
<p><strong>Variable assignment</strong></p>
<p>The variable must belong to the variables listed in the <code class="docutils literal notranslate"><span class="pre">Parameters</span></code>
section of the generated makefile.
Here we describe only few of them.</p>
<dl class="field-list simple">
<dt class="field-odd">CAMLPKGS</dt>
<dd class="field-odd"><p>can be used to specify third party findlib packages, and is
passed to the OCaml compiler on building or linking of modules. Eg:
<code class="docutils literal notranslate"><span class="pre">-package</span> <span class="pre">yojson</span></code>.</p>
</dd>
<dt class="field-even">CAMLFLAGS</dt>
<dd class="field-even"><p>can be used to specify additional flags to the <span class="smallcaps">OCaml</span>
compiler, like <code class="docutils literal notranslate"><span class="pre">-bin-annot</span></code> or <code class="docutils literal notranslate"><span class="pre">-w</span></code>....</p>
</dd>
<dt class="field-odd">COQC, COQDEP, COQDOC</dt>
<dd class="field-odd"><p>can be set in order to use alternative binaries
(e.g. wrappers)</p>
</dd>
<dt class="field-even">COQ_SRC_SUBDIRS</dt>
<dd class="field-even"><p>can be extended by including other paths in which <code class="docutils literal notranslate"><span class="pre">*.cm*</span></code> files
are searched. For example <code class="docutils literal notranslate"><span class="pre">COQ_SRC_SUBDIRS+=user-contrib/Unicoq</span></code>
lets you build a plugin containing OCaml code that depends on the
OCaml code of <code class="docutils literal notranslate"><span class="pre">Unicoq</span></code>.</p>
</dd>
</dl>
<p><strong>Rule extension</strong></p>
<p>The following makefile rules can be extended.</p>
<div class="admonition note">
<p class="admonition-title">Example</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>pre-all::
        echo &quot;This line is print before making the all target&quot;
install-extra::
        cp ThisExtraFile /there/it/goes
</pre></div>
</div>
</div>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">pre-all::</span></code></dt><dd><p>run before the <code class="docutils literal notranslate"><span class="pre">all</span></code> target. One can use this to configure
the project, or initialize sub modules or check dependencies are met.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">post-all::</span></code></dt><dd><p>run after the <code class="docutils literal notranslate"><span class="pre">all</span></code> target. One can use this to run a test
suite, or compile extracted code.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">install-extra::</span></code></dt><dd><p>run after <code class="docutils literal notranslate"><span class="pre">install</span></code>. One can use this to install extra files.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">install-doc::</span></code></dt><dd><p>One can use this to install extra doc.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uninstall::</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">uninstall-doc::</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">clean::</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cleanall::</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">archclean::</span></code></dt><dd><p></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">merlin-hook::</span></code></dt><dd><p>One can append lines to the generated <code class="docutils literal notranslate"><span class="pre">.merlin</span></code> file extending this
target.</p>
</dd>
</dl>
</div>
<div class="section" id="timing-targets-and-performance-testing">
<h3>Timing targets and performance testing<a class="headerlink" href="#timing-targets-and-performance-testing" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>The generated <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> supports the generation of two kinds of timing
data: per-file build-times, and per-line times for an individual file.</p>
<p>The following targets and Makefile variables allow collection of per-
file timing data:</p>
<ul>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">TIMED=1</span></code></dt><dd><p>passing this variable will cause <code class="docutils literal notranslate"><span class="pre">make</span></code> to emit a line
describing the user-space build-time and peak memory usage for each
file built.</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>On <code class="docutils literal notranslate"><span class="pre">Mac</span> <span class="pre">OS</span></code>, this works best if you’ve installed <code class="docutils literal notranslate"><span class="pre">gnu-time</span></code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Example</p>
<p>For example, the output of <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">TIMED=1</span></code> may look like
this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>COQDEP Fast.v
COQDEP Slow.v
COQC Slow.v
Slow (user: 0.34 mem: 395448 ko)
COQC Fast.v
Fast (user: 0.01 mem: 45184 ko)
</pre></div>
</div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">pretty-timed</span></code></dt><dd><p>this target stores the output of <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">TIMED=1</span></code> into
<code class="docutils literal notranslate"><span class="pre">time-of-build.log</span></code>, and displays a table of the times, sorted from
slowest to fastest, which is also stored in <code class="docutils literal notranslate"><span class="pre">time-of-build-pretty.log</span></code>.
If you want to construct the <code class="docutils literal notranslate"><span class="pre">log</span></code> for targets other than the default
one, you can pass them via the variable <code class="docutils literal notranslate"><span class="pre">TGTS</span></code>, e.g., <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">pretty-timed</span>
<span class="pre">TGTS=&quot;a.vo</span> <span class="pre">b.vo&quot;</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>This target will <em>append</em> to the timing log; if you want a
fresh start, you must remove the <code class="docutils literal notranslate"><span class="pre">filetime-of-build.log</span></code> or
<code class="docutils literal notranslate"><span class="pre">run</span> <span class="pre">make</span> <span class="pre">cleanall</span></code>.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Example</p>
<p>For example, the output of <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">pretty-timed</span></code> may look like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>COQDEP Fast.v
COQDEP Slow.v
COQC Slow.v
Slow (user: 0.36 mem: 393912 ko)
COQC Fast.v
Fast (user: 0.05 mem: 45992 ko)
Time     | File Name
--------------------
0m00.41s | Total
--------------------
0m00.36s | Slow
0m00.05s | Fast
</pre></div>
</div>
</div>
</dd>
</dl>
</li>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">print-pretty-timed-diff</span></code></dt><dd><p>this target builds a table of timing changes between two compilations; run
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">make-pretty-timed-before</span></code> to build the log of the “before” times,
and run <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">make-pretty-timed-after</span></code> to build the log of the “after”
times. The table is printed on the command line, and stored in
<code class="docutils literal notranslate"><span class="pre">time-of-build-both.log</span></code>. This target is most useful for profiling the
difference between two commits in a repository.</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>This target requires <code class="docutils literal notranslate"><span class="pre">python</span></code> to build the table.</p>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>The <code class="docutils literal notranslate"><span class="pre">make-pretty-timed-before</span></code> and <code class="docutils literal notranslate"><span class="pre">make-pretty-timed-after</span></code> targets will
<em>append</em> to the timing log; if you want a fresh start, you must remove
the files <code class="docutils literal notranslate"><span class="pre">time-of-build-before.log</span></code> and <code class="docutils literal notranslate"><span class="pre">time-of-build-after.log</span></code> or run
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">cleanall</span></code> <em>before</em> building either the “before” or “after”
targets.</p>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>The table will be sorted first by absolute time
differences rounded towards zero to a whole-number of seconds, then by
times in the “after” column, and finally lexicographically by file
name. This will put the biggest changes in either direction first, and
will prefer sorting by build-time over subsecond changes in build time
(which are frequently noise); lexicographic sorting forces an order on
files which take effectively no time to compile.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Example</p>
<p>For example, the output table from
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">print-pretty-timed-diff</span></code> may look like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>After    | File Name | Before   || Change    | % Change
--------------------------------------------------------
0m00.39s | Total     | 0m00.35s || +0m00.03s | +11.42%
--------------------------------------------------------
0m00.37s | Slow      | 0m00.01s || +0m00.36s | +3600.00%
0m00.02s | Fast      | 0m00.34s || -0m00.32s | -94.11%
</pre></div>
</div>
</div>
</dd>
</dl>
</li>
</ul>
<p>The following targets and <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> variables allow collection of per-
line timing data:</p>
<ul>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">TIMING=1</span></code></dt><dd><p>passing this variable will cause <code class="docutils literal notranslate"><span class="pre">make</span></code> to use <code class="docutils literal notranslate"><span class="pre">coqc</span> <span class="pre">-time</span></code> to
write to a <code class="docutils literal notranslate"><span class="pre">.v.timing</span></code> file for each <code class="docutils literal notranslate"><span class="pre">.v</span></code> file compiled, which contains
line-by-line timing information.</p>
<div class="admonition note">
<p class="admonition-title">Example</p>
<p>For example, running <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">all</span> <span class="pre">TIMING=1</span></code> may result in a file like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Chars 0 - 26 [Require~Coq.ZArith.BinInt.] 0.157 secs (0.128u,0.028s)
Chars 27 - 68 [Declare~Reduction~comp~:=~vm_c...] 0. secs (0.u,0.s)
Chars 69 - 162 [Definition~foo0~:=~Eval~comp~i...] 0.153 secs (0.136u,0.019s)
Chars 163 - 208 [Definition~foo1~:=~Eval~comp~i...] 0.239 secs (0.236u,0.s)
</pre></div>
</div>
</div>
</dd>
</dl>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">print-pretty-single-time-diff</span></code></p>
<blockquote>
<div><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>print-pretty-single-time-diff BEFORE=path/to/file.v.before-timing AFTER=path/to/file.v.after-timing
</pre></div>
</div>
<p>this target will make a sorted table of the per-line timing differences
between the timing logs in the <code class="docutils literal notranslate"><span class="pre">BEFORE</span></code> and <code class="docutils literal notranslate"><span class="pre">AFTER</span></code> files, display it, and
save it to the file specified by the <code class="docutils literal notranslate"><span class="pre">TIME_OF_PRETTY_BUILD_FILE</span></code> variable,
which defaults to <code class="docutils literal notranslate"><span class="pre">time-of-build-pretty.log</span></code>.
To generate the <code class="docutils literal notranslate"><span class="pre">.v.before-timing</span></code> or <code class="docutils literal notranslate"><span class="pre">.v.after-timing</span></code> files, you should
pass  <code class="docutils literal notranslate"><span class="pre">TIMING=before</span></code> or <code class="docutils literal notranslate"><span class="pre">TIMING=after</span></code> rather than <code class="docutils literal notranslate"><span class="pre">TIMING=1</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>The sorting used here is the same as in the <code class="docutils literal notranslate"><span class="pre">print-pretty-timed</span> <span class="pre">-diff</span></code> target.</p>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>This target requires python to build the table.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Example</p>
<p>For example, running  <code class="docutils literal notranslate"><span class="pre">print-pretty-single-time-diff</span></code> might give a table like this:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>After     | Code                                                | Before    || Change    | % Change
---------------------------------------------------------------------------------------------------
0m00.50s  | Total                                               | 0m04.17s  || -0m03.66s | -87.96%
---------------------------------------------------------------------------------------------------
0m00.145s | Chars 069 - 162 [Definition~foo0~:=~Eval~comp~i...] | 0m00.192s || -0m00.04s | -24.47%
0m00.126s | Chars 000 - 026 [Require~Coq.ZArith.BinInt.]        | 0m00.143s || -0m00.01s | -11.88%
   N/A    | Chars 027 - 068 [Declare~Reduction~comp~:=~nati...] | 0m00.s    || +0m00.00s | N/A
0m00.s    | Chars 027 - 068 [Declare~Reduction~comp~:=~vm_c...] |    N/A    || +0m00.00s | N/A
0m00.231s | Chars 163 - 208 [Definition~foo1~:=~Eval~comp~i...] | 0m03.836s || -0m03.60s | -93.97%
</pre></div>
</div>
</div>
</div></blockquote>
</li>
<li><dl>
<dt><code class="docutils literal notranslate"><span class="pre">all.timing.diff</span></code>, <code class="docutils literal notranslate"><span class="pre">path/to/file.v.timing.diff</span></code></dt><dd><p>The <code class="docutils literal notranslate"><span class="pre">path/to/file.v.timing.diff</span></code> target will make a <code class="docutils literal notranslate"><span class="pre">.v.timing.diff</span></code> file for
the corresponding <code class="docutils literal notranslate"><span class="pre">.v</span></code> file, with a table as would be generated by
the <code class="docutils literal notranslate"><span class="pre">print-pretty-single-time-diff</span></code> target; it depends on having already
made the corresponding <code class="docutils literal notranslate"><span class="pre">.v.before-timing</span></code> and <code class="docutils literal notranslate"><span class="pre">.v.after-timing</span></code> files,
which can be made by passing <code class="docutils literal notranslate"><span class="pre">TIMING=before</span></code> and <code class="docutils literal notranslate"><span class="pre">TIMING=after</span></code>.
The  <code class="docutils literal notranslate"><span class="pre">all.timing.diff</span></code> target will make such timing difference files for
all of the <code class="docutils literal notranslate"><span class="pre">.v</span></code> files that the <code class="docutils literal notranslate"><span class="pre">Makefile</span></code> knows about. It will fail if
some <code class="docutils literal notranslate"><span class="pre">.v.before-timing</span></code> or <code class="docutils literal notranslate"><span class="pre">.v.after-timing</span></code> files don’t exist.</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>This target requires python to build the table.</p>
</div>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="reusing-extending-the-generated-makefile">
<h3>Reusing/extending the generated Makefile<a class="headerlink" href="#reusing-extending-the-generated-makefile" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Including the generated makefile with an include directive is
discouraged. The contents of this file, including variable names and
status of rules shall change in the future. Users are advised to
include <code class="docutils literal notranslate"><span class="pre">Makefile.conf</span></code> or call a target of the generated Makefile as in
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">-f</span> <span class="pre">Makefile</span> <span class="pre">target</span></code> from another Makefile.</p>
<p>One way to get access to all targets of the generated <code class="docutils literal notranslate"><span class="pre">CoqMakefile</span></code> is to
have a generic target for invoking unknown targets.</p>
<div class="admonition note">
<p class="admonition-title">Example</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span># KNOWNTARGETS will not be passed along to CoqMakefile
KNOWNTARGETS := CoqMakefile extra-stuff extra-stuff2
# KNOWNFILES will not get implicit targets from the final rule, and so
# depending on them won&#39;t invoke the submake
# Warning: These files get declared as PHONY, so any targets depending
# on them always get rebuilt
KNOWNFILES   := Makefile _CoqProject

.DEFAULT_GOAL := invoke-coqmakefile

CoqMakefile: Makefile _CoqProject
        $(COQBIN)coq_makefile -f _CoqProject -o CoqMakefile

invoke-coqmakefile: CoqMakefile
        $(MAKE) --no-print-directory -f CoqMakefile $(filter-out $(KNOWNTARGETS),$(MAKECMDGOALS))

.PHONY: invoke-coqmakefile $(KNOWNFILES)

####################################################################
##                      Your targets here                         ##
####################################################################

# This should be the last rule, to handle any targets not declared above
%: invoke-coqmakefile
        @true
</pre></div>
</div>
</div>
</div>
<div class="section" id="building-a-subset-of-the-targets-with-j">
<h3>Building a subset of the targets with <code class="docutils literal notranslate"><span class="pre">-j</span></code><a class="headerlink" href="#building-a-subset-of-the-targets-with-j" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>To build, say, two targets foo.vo and bar.vo in parallel one can use
<code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">only</span> <span class="pre">TGTS=&quot;foo.vo</span> <span class="pre">bar.vo&quot;</span> <span class="pre">-j</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">foo.vo</span> <span class="pre">bar.vo</span> <span class="pre">-j</span></code> has a different meaning for the make
utility, in particular it may build a shared prerequisite twice.</p>
</div>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>For users of coq_makefile with version &lt; 8.7</p>
<ul class="simple">
<li><p>Support for &quot;subdirectory&quot; is deprecated. To perform actions before
or after the build (like invoking <code class="docutils literal notranslate"><span class="pre">make</span></code> on a subdirectory) one can hook
in pre-all and post-all extension points.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-extra-phony</span></code> and <code class="docutils literal notranslate"><span class="pre">-extra</span></code> are deprecated. To provide additional target
(<code class="docutils literal notranslate"><span class="pre">.PHONY</span></code> or not) please use <code class="docutils literal notranslate"><span class="pre">CoqMakefile.local</span></code>.</p></li>
</ul>
</div>
</div>
</div>
<div class="section" id="module-dependencies">
<h2>Module dependencies<a class="headerlink" href="#module-dependencies" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>In order to compute module dependencies (so to use <code class="docutils literal notranslate"><span class="pre">make</span></code>), <span class="smallcaps">Coq</span> comes
with an appropriate tool, <code class="docutils literal notranslate"><span class="pre">coqdep</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">coqdep</span></code> computes inter-module dependencies for <span class="smallcaps">Coq</span> and <span class="smallcaps">OCaml</span>
programs, and prints the dependencies on the standard output in a
format readable by make. When a directory is given as argument, it is
recursively looked at.</p>
<p>Dependencies of <span class="smallcaps">Coq</span> modules are computed by looking at <code class="docutils literal notranslate"><span class="pre">Require</span></code>
commands (<code class="docutils literal notranslate"><span class="pre">Require</span></code>, <code class="docutils literal notranslate"><span class="pre">Require</span> <span class="pre">Export</span></code>, <code class="docutils literal notranslate"><span class="pre">Require</span> <span class="pre">Import</span></code>), but also at the
command <code class="docutils literal notranslate"><span class="pre">Declare</span> <span class="pre">ML</span> <span class="pre">Module</span></code>.</p>
<p>Dependencies of <span class="smallcaps">OCaml</span> modules are computed by looking at
<cite>open</cite> commands and the dot notation <em>module.value</em>. However, this is
done approximately and you are advised to use <code class="docutils literal notranslate"><span class="pre">ocamldep</span></code> instead for the
<span class="smallcaps">OCaml</span> module dependencies.</p>
<p>See the man page of <code class="docutils literal notranslate"><span class="pre">coqdep</span></code> for more details and options.</p>
<p>The build infrastructure generated by <code class="docutils literal notranslate"><span class="pre">coq_makefile</span></code> uses <code class="docutils literal notranslate"><span class="pre">coqdep</span></code> to
automatically compute the dependencies among the files part of the
project.</p>
</div>
<div class="section" id="documenting-coq-files-with-coqdoc">
<span id="coqdoc"></span><h2>Documenting <span class="smallcaps">Coq</span> files with coqdoc<a class="headerlink" href="#documenting-coq-files-with-coqdoc" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>coqdoc is a documentation tool for the proof assistant <span class="smallcaps">Coq</span>, similar to
<code class="docutils literal notranslate"><span class="pre">javadoc</span></code> or <code class="docutils literal notranslate"><span class="pre">ocamldoc</span></code>. The task of coqdoc is</p>
<ol class="arabic simple">
<li><p>to produce a nice <span class="smallcaps">LaTeX</span> and/or HTML document from <span class="smallcaps">Coq</span> source files,
readable for a human and not only for the proof assistant;</p></li>
<li><p>to help the user navigate his own (or third-party) sources.</p></li>
</ol>
<div class="section" id="principles">
<h3>Principles<a class="headerlink" href="#principles" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Documentation is inserted into <span class="smallcaps">Coq</span> files as <em>special comments</em>. Thus
your files will compile as usual, whether you use coqdoc or not. coqdoc
presupposes that the given <span class="smallcaps">Coq</span> files are well-formed (at least
lexically). Documentation starts with <code class="docutils literal notranslate"><span class="pre">(**</span></code>, followed by a space, and
ends with <code class="docutils literal notranslate"><span class="pre">*)</span></code>. The documentation format is inspired by Todd
A. Coram’s <em>Almost Free Text (AFT)</em> tool: it is mainly <code class="docutils literal notranslate"><span class="pre">ASCII</span></code> text with
some syntax-light controls, described below. coqdoc is robust: it
shouldn’t fail, whatever the input is. But remember: “garbage in,
garbage out”.</p>
<div class="section" id="coq-material-inside-documentation">
<h4><span class="smallcaps">Coq</span> material inside documentation.<a class="headerlink" href="#coq-material-inside-documentation" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><span class="smallcaps">Coq</span> material is quoted between the delimiters <code class="docutils literal notranslate"><span class="pre">[</span></code> and <code class="docutils literal notranslate"><span class="pre">]</span></code>. Square brackets
may be nested, the inner ones being understood as being part of the
quoted code (thus you can quote a term like <code class="docutils literal notranslate"><span class="pre">fun</span> <span class="pre">x</span> <span class="pre">=&gt;</span> <span class="pre">u</span></code> by writing  <code class="docutils literal notranslate"><span class="pre">[fun</span>
<span class="pre">x</span> <span class="pre">=&gt;</span> <span class="pre">u]</span></code>). Inside quotations, the code is pretty-printed in the same
way as it is in code parts.</p>
<p>Preformatted vernacular is enclosed by <code class="docutils literal notranslate"><span class="pre">[[</span></code> and <code class="docutils literal notranslate"><span class="pre">]]</span></code>. The former must be
followed by a newline and the latter must follow a newline.</p>
</div>
<div class="section" id="pretty-printing">
<h4>Pretty-printing.<a class="headerlink" href="#pretty-printing" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>coqdoc uses different faces for identifiers and keywords. The pretty-
printing of <span class="smallcaps">Coq</span> tokens (identifiers or symbols) can be controlled
using one of the following commands:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(** printing  *token* %...LATEX...% #...html...# *)
</pre></div>
</div>
<p>or</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(** printing  *token* $...LATEX math...$ #...html...# *)
</pre></div>
</div>
<p>It gives the <span class="smallcaps">LaTeX</span> and HTML texts to be produced for the given <span class="smallcaps">Coq</span>
token. Either the <span class="smallcaps">LaTeX</span> or the HTML rule may be omitted, causing the
default pretty-printing to be used for this token.</p>
<p>The printing for one token can be removed with</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(** remove printing  *token* *)
</pre></div>
</div>
<p>Initially, the pretty-printing table contains the following mapping:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 10%" />
<col style="width: 13%" />
<col style="width: 16%" />
<col style="width: 10%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><cite>-&gt;</cite></p></td>
<td><p>→</p></td>
<td></td>
<td><p><cite>&lt;-</cite></p></td>
<td><p>←</p></td>
<td></td>
<td><p><cite>*</cite></p></td>
<td><p>×</p></td>
</tr>
<tr class="row-even"><td><p><cite>&lt;=</cite></p></td>
<td><p>≤</p></td>
<td></td>
<td><p><cite>&gt;=</cite></p></td>
<td><p>≥</p></td>
<td></td>
<td><p><cite>=&gt;</cite></p></td>
<td><p>⇒</p></td>
</tr>
<tr class="row-odd"><td><p><cite>&lt;&gt;</cite></p></td>
<td><p>≠</p></td>
<td></td>
<td><p><cite>&lt;-&gt;</cite></p></td>
<td><p>↔</p></td>
<td></td>
<td><p><cite>|-</cite></p></td>
<td><p>⊢</p></td>
</tr>
<tr class="row-even"><td><p><cite>\/</cite></p></td>
<td><p>∨</p></td>
<td></td>
<td><p><cite>/\</cite></p></td>
<td><p>∧</p></td>
<td></td>
<td><p><cite>~</cite></p></td>
<td><p>¬</p></td>
</tr>
</tbody>
</table>
<p>Any of these can be overwritten or suppressed using the printing
commands.</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>The recognition of tokens is done by a (<code class="docutils literal notranslate"><span class="pre">ocaml</span></code>) lex
automaton and thus applies the longest-match rule. For instance, <cite>-&gt;~</cite>
is recognized as a single token, where <span class="smallcaps">Coq</span> sees two tokens. It is the
responsibility of the user to insert space between tokens <em>or</em> to give
pretty-printing rules for the possible combinations, e.g.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(** printing -&gt;~ %\ensuremath{\rightarrow\lnot}% *)
</pre></div>
</div>
</div>
</div>
<div class="section" id="sections">
<h4>Sections<a class="headerlink" href="#sections" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Sections are introduced by 1 to 4 asterisks at the beginning of a line
followed by a space and the title of the section. One asterisk is a section,
two a subsection, etc.</p>
<div class="admonition note">
<p class="admonition-title">Example</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(** * Well-founded relations

    In this section, we introduce...  *)
</pre></div>
</div>
</div>
</div>
<div class="section" id="lists">
<h4>Lists.<a class="headerlink" href="#lists" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>List items are introduced by a leading dash. coqdoc uses whitespace to
determine the depth of a new list item and which text belongs in which
list items. A list ends when a line of text starts at or before the
level of indenting of the list’s dash. A list item’s dash must always
be the first non-space character on its line (so, in particular, a
list can not begin on the first line of a comment - start it on the
second line instead).</p>
<div class="admonition note">
<p class="admonition-title">Example</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>We go by induction on [n]:
- If [n] is 0...
- If [n] is [S n&#39;] we require...

  two paragraphs of reasoning, and two subcases:

  - In the first case...
  - In the second case...

So the theorem holds.
</pre></div>
</div>
</div>
</div>
<div class="section" id="rules">
<h4>Rules.<a class="headerlink" href="#rules" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>More than 4 leading dashes produce a horizontal rule.</p>
</div>
<div class="section" id="emphasis">
<h4>Emphasis.<a class="headerlink" href="#emphasis" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Text can be italicized by enclosing it in underscores. A non-identifier
character must precede the leading underscore and follow the trailing
underscore, so that uses of underscores in names aren’t mistaken for
emphasis. Usually, these are spaces or punctuation.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>This sentence contains some _emphasized text_.
</pre></div>
</div>
</div>
<div class="section" id="escaping-to-latex-and-html">
<h4>Escaping to <span class="smallcaps">LaTeX</span> and HTML.<a class="headerlink" href="#escaping-to-latex-and-html" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Pure <span class="smallcaps">LaTeX</span> or HTML material can be inserted using the following
escape sequences:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">$...LATEX</span> <span class="pre">stuff...$</span></code> inserts some <span class="smallcaps">LaTeX</span> material in math mode.
Simply discarded in HTML output.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">%...LATEX</span> <span class="pre">stuff...%</span></code> inserts some <span class="smallcaps">LaTeX</span> material. Simply
discarded in HTML output.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">#...HTML</span> <span class="pre">stuff...#</span></code> inserts some HTML material. Simply discarded in
<span class="smallcaps">LaTeX</span> output.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>to simply output the characters <code class="docutils literal notranslate"><span class="pre">$</span></code>, <code class="docutils literal notranslate"><span class="pre">%</span></code> and <code class="docutils literal notranslate"><span class="pre">#</span></code> and escaping
their escaping role, these characters must be doubled.</p>
</div>
</div>
<div class="section" id="verbatim">
<h4>Verbatim<a class="headerlink" href="#verbatim" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Verbatim material is introduced by a leading <code class="docutils literal notranslate"><span class="pre">&lt;&lt;</span></code> and closed by <code class="docutils literal notranslate"><span class="pre">&gt;&gt;</span></code>
at the beginning of a line.</p>
<div class="admonition note">
<p class="admonition-title">Example</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>Here is the corresponding caml code:
&lt;&lt;
  let rec fact n =
    if n &lt;= 1 then 1 else n * fact (n-1)
&gt;&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="hyperlinks">
<h4>Hyperlinks<a class="headerlink" href="#hyperlinks" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Hyperlinks can be inserted into the HTML output, so that any
identifier is linked to the place of its definition.</p>
<p><code class="docutils literal notranslate"><span class="pre">coqc</span> <span class="pre">file.v</span></code> automatically dumps localization information in
<code class="docutils literal notranslate"><span class="pre">file.glob</span></code> or appends it to a file specified using the option <code class="docutils literal notranslate"><span class="pre">--dump-glob</span>
<span class="pre">file</span></code>. Take care of erasing this global file, if any, when starting
the whole compilation process.</p>
<p>Then invoke coqdoc or <code class="docutils literal notranslate"><span class="pre">coqdoc</span> <span class="pre">--glob-from</span> <span class="pre">file</span></code> to tell coqdoc to look
for name resolutions in the file <code class="docutils literal notranslate"><span class="pre">file</span></code> (it will look in <code class="docutils literal notranslate"><span class="pre">file.glob</span></code>
by default).</p>
<p>Identifiers from the <span class="smallcaps">Coq</span> standard library are linked to the Coq website
<a class="reference external" href="http://coq.inria.fr/library/">http://coq.inria.fr/library/</a>. This behavior can be changed
using command line options <code class="docutils literal notranslate"><span class="pre">--no-externals</span></code> and <code class="docutils literal notranslate"><span class="pre">--coqlib</span></code>; see below.</p>
</div>
<div class="section" id="hiding-showing-parts-of-the-source">
<h4>Hiding / Showing parts of the source.<a class="headerlink" href="#hiding-showing-parts-of-the-source" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p>Some parts of the source can be hidden using command line options <code class="docutils literal notranslate"><span class="pre">-g</span></code>
and <code class="docutils literal notranslate"><span class="pre">-l</span></code> (see below), or using such comments:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(* begin hide *)
 *some Coq material*
(* end hide *)
</pre></div>
</div>
<p>Conversely, some parts of the source which would be hidden can be
shown using such comments:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(* begin show *)
 *some Coq material*
(* end show *)
</pre></div>
</div>
<p>The latter cannot be used around some inner parts of a proof, but can
be used around a whole proof.</p>
</div>
</div>
<div class="section" id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>coqdoc is invoked on a shell command line as follows:
<code class="docutils literal notranslate"><span class="pre">coqdoc</span> <span class="pre">&lt;options</span> <span class="pre">and</span> <span class="pre">files&gt;</span></code>.
Any command line argument which is not an option is considered to be a
file (even if it starts with a <code class="docutils literal notranslate"><span class="pre">-</span></code>). <span class="smallcaps">Coq</span> files are identified by the
suffixes <code class="docutils literal notranslate"><span class="pre">.v</span></code> and <code class="docutils literal notranslate"><span class="pre">.g</span></code> and <span class="smallcaps">LaTeX</span> files by the suffix <code class="docutils literal notranslate"><span class="pre">.tex</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">HTML output</dt>
<dd class="field-odd"><p>This is the default output format. One HTML file is created for
each <span class="smallcaps">Coq</span> file given on the command line, together with a file
<code class="docutils literal notranslate"><span class="pre">index.html</span></code> (unless <code class="docutils literal notranslate"><span class="pre">option-no-index</span> <span class="pre">is</span> <span class="pre">passed</span></code>). The HTML pages use a
style sheet named <code class="docutils literal notranslate"><span class="pre">style.css</span></code>. Such a file is distributed with coqdoc.</p>
</dd>
<dt class="field-even"><span class="smallcaps">LaTeX</span> output</dt>
<dd class="field-even"><p>A single <span class="smallcaps">LaTeX</span> file is created, on standard
output. It can be redirected to a file using the option <code class="docutils literal notranslate"><span class="pre">-o</span></code>. The order of
files on the command line is kept in the final document. <span class="smallcaps">LaTeX</span>
files given on the command line are copied ‘as is’ in the final
document . DVI and PostScript can be produced directly with the
options <code class="docutils literal notranslate"><span class="pre">-dvi</span></code> and <code class="docutils literal notranslate"><span class="pre">-ps</span></code> respectively.</p>
</dd>
<dt class="field-odd">TEXmacs output</dt>
<dd class="field-odd"><p>To translate the input files to TEXmacs format,
to be used by the TEXmacs <span class="smallcaps">Coq</span> interface.</p>
</dd>
</dl>
<div class="section" id="command-line-options">
<h4>Command line options<a class="headerlink" href="#command-line-options" title="このヘッドラインへのパーマリンク">¶</a></h4>
<p><strong>Overall options</strong></p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">--HTML</dt>
<dd class="field-odd"><p>Select a HTML output.</p>
</dd>
<dt class="field-even">--<span class="smallcaps">LaTeX</span></dt>
<dd class="field-even"><p>Select a <span class="smallcaps">LaTeX</span> output.</p>
</dd>
<dt class="field-odd">--dvi</dt>
<dd class="field-odd"><p>Select a DVI output.</p>
</dd>
<dt class="field-even">--ps</dt>
<dd class="field-even"><p>Select a PostScript output.</p>
</dd>
<dt class="field-odd">--texmacs</dt>
<dd class="field-odd"><p>Select a TEXmacs output.</p>
</dd>
<dt class="field-even">--stdout</dt>
<dd class="field-even"><p>Write output to stdout.</p>
</dd>
<dt class="field-odd">-o file, --output file</dt>
<dd class="field-odd"><p>Redirect the output into the file ‘file’
(meaningless with <code class="docutils literal notranslate"><span class="pre">-html</span></code>).</p>
</dd>
<dt class="field-even">-d dir, --directory dir</dt>
<dd class="field-even"><p>Output files into directory ‘dir’ instead of
the current directory (option <code class="docutils literal notranslate"><span class="pre">-d</span></code> does not change the filename specified
with the option <code class="docutils literal notranslate"><span class="pre">-o</span></code>, if any).</p>
</dd>
<dt class="field-odd">--body-only</dt>
<dd class="field-odd"><p>Suppress the header and trailer of the final document.
Thus, you can insert the resulting document into a larger one.</p>
</dd>
<dt class="field-even">-p string, --preamble string</dt>
<dd class="field-even"><p>Insert some material in the <span class="smallcaps">LaTeX</span>
preamble, right before <code class="docutils literal notranslate"><span class="pre">\begin{document}</span></code> (meaningless with <code class="docutils literal notranslate"><span class="pre">-html</span></code>).</p>
</dd>
<dt class="field-odd">--vernac-file file,--tex-file file</dt>
<dd class="field-odd"><p>Considers the file ‘file’
respectively as a <code class="docutils literal notranslate"><span class="pre">.v</span></code> (or <code class="docutils literal notranslate"><span class="pre">.g</span></code>) file or a <code class="docutils literal notranslate"><span class="pre">.tex</span></code> file.</p>
</dd>
<dt class="field-even">--files-from file</dt>
<dd class="field-even"><p>Read filenames to be processed from the file ‘file’ as if
they were given on the command line. Useful for program sources split
up into several directories.</p>
</dd>
<dt class="field-odd">-q, --quiet</dt>
<dd class="field-odd"><p>Be quiet. Do not print anything except errors.</p>
</dd>
<dt class="field-even">-h, --help</dt>
<dd class="field-even"><p>Give a short summary of the options and exit.</p>
</dd>
<dt class="field-odd">-v, --version</dt>
<dd class="field-odd"><p>Print the version and exit.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Index options</strong></p>
<blockquote>
<div><p>The default behavior is to build an index, for the HTML output only,
into <code class="docutils literal notranslate"><span class="pre">index.html</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">--no-index</dt>
<dd class="field-odd"><p>Do not output the index.</p>
</dd>
<dt class="field-even">--multi-index</dt>
<dd class="field-even"><p>Generate one page for each category and each letter in
the index, together with a top page <code class="docutils literal notranslate"><span class="pre">index.html</span></code>.</p>
</dd>
<dt class="field-odd">--index string</dt>
<dd class="field-odd"><p>Make the filename of the index string instead of
“index”. Useful since “index.html” is special.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Table of contents option</strong></p>
<blockquote>
<div><dl class="field-list simple">
<dt class="field-odd">-toc, --table-of-contents</dt>
<dd class="field-odd"><p>Insert a table of contents. For a <span class="smallcaps">LaTeX</span>
output, it inserts a <code class="docutils literal notranslate"><span class="pre">\tableofcontents</span></code> at the beginning of the
document. For a HTML output, it builds a table of contents into
<code class="docutils literal notranslate"><span class="pre">toc.html</span></code>.</p>
</dd>
<dt class="field-even">--toc-depth int</dt>
<dd class="field-even"><p>Only include headers up to depth <code class="docutils literal notranslate"><span class="pre">int</span></code> in the table of
contents.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Hyperlink options</strong></p>
<blockquote>
<div><dl class="field-list">
<dt class="field-odd">--glob-from file</dt>
<dd class="field-odd"><p>Make references using <span class="smallcaps">Coq</span> globalizations from file
file. (Such globalizations are obtained with Coq option <code class="docutils literal notranslate"><span class="pre">-dump-glob</span></code>).</p>
</dd>
<dt class="field-even">--no-externals</dt>
<dd class="field-even"><p>Do not insert links to the <span class="smallcaps">Coq</span> standard library.</p>
</dd>
<dt class="field-odd">--external url coqdir</dt>
<dd class="field-odd"><p>Use given URL for linking references whose
name starts with prefix <code class="docutils literal notranslate"><span class="pre">coqdir</span></code>.</p>
</dd>
<dt class="field-even">--coqlib url</dt>
<dd class="field-even"><p>Set base URL for the Coq standard library (default is
<a class="reference external" href="http://coq.inria.fr/library/">http://coq.inria.fr/library/</a>). This is equivalent to <code class="docutils literal notranslate"><span class="pre">--external</span> <span class="pre">url</span>
<span class="pre">Coq</span></code>.</p>
</dd>
<dt class="field-odd">-R dir coqdir</dt>
<dd class="field-odd"><p>Map physical directory dir to <span class="smallcaps">Coq</span> logical
directory  <code class="docutils literal notranslate"><span class="pre">coqdir</span></code> (similarly to <span class="smallcaps">Coq</span> option <code class="docutils literal notranslate"><span class="pre">-R</span></code>).</p>
<div class="admonition note">
<p class="admonition-title">注釈</p>
<p>option <code class="docutils literal notranslate"><span class="pre">-R</span></code> only has
effect on the files <em>following</em> it on the command line, so you will
probably need to put this option first.</p>
</div>
</dd>
</dl>
</div></blockquote>
<p><strong>Title options</strong></p>
<blockquote>
<div><dl class="field-list">
<dt class="field-odd">-s , --short</dt>
<dd class="field-odd"><p>Do not insert titles for the files. The default
behavior is to insert a title like “Library Foo” for each file.</p>
</dd>
<dt class="field-even">--lib-name string</dt>
<dd class="field-even"><p>Print “string Foo” instead of “Library Foo” in
titles. For example “Chapter” and “Module” are reasonable choices.</p>
</dd>
<dt class="field-odd">--no-lib-name</dt>
<dd class="field-odd"><p>Print just “Foo” instead of “Library Foo” in titles.</p>
</dd>
<dt class="field-even">--lib-subtitles</dt>
<dd class="field-even"><p>Look for library subtitles. When enabled, the
beginning of each file is checked for a comment of the form:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(** * ModuleName : text *)
</pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">ModuleName</span></code> must be the name of the file. If it is present, the
text is used as a subtitle for the module in appropriate places.</p>
</dd>
<dt class="field-odd">-t string, --title string</dt>
<dd class="field-odd"><p>Set the document title.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Contents options</strong></p>
<blockquote>
<div><dl class="field-list">
<dt class="field-odd">-g, --gallina</dt>
<dd class="field-odd"><p>Do not print proofs.</p>
</dd>
<dt class="field-even">-l, --light</dt>
<dd class="field-even"><p>Light mode. Suppress proofs (as with <code class="docutils literal notranslate"><span class="pre">-g</span></code>) and the following commands:</p>
<blockquote>
<div><ul class="simple">
<li><p>[Recursive] Tactic Definition</p></li>
<li><p>Hint / Hints</p></li>
<li><p>Require</p></li>
<li><p>Transparent / Opaque</p></li>
<li><p>Implicit Argument / Implicits</p></li>
<li><p>Section / Variable / Hypothesis / End</p></li>
</ul>
</div></blockquote>
<p>The behavior of options <code class="docutils literal notranslate"><span class="pre">-g</span></code> and <code class="docutils literal notranslate"><span class="pre">-l</span></code> can be locally overridden using the
<code class="docutils literal notranslate"><span class="pre">(*</span> <span class="pre">begin</span> <span class="pre">show</span> <span class="pre">*)</span> <span class="pre">…</span> <span class="pre">(*</span> <span class="pre">end</span> <span class="pre">show</span> <span class="pre">*)</span></code> environment (see above).</p>
<p>There are a few options that control the parsing of comments:</p>
</dd>
<dt class="field-odd">--parse-comments</dt>
<dd class="field-odd"><p>Parse regular comments delimited by <code class="docutils literal notranslate"><span class="pre">(*</span></code> and <code class="docutils literal notranslate"><span class="pre">*)</span></code> as
well. They are typeset inline.</p>
</dd>
<dt class="field-even">--plain-comments</dt>
<dd class="field-even"><p>Do not interpret comments, simply copy them as
plain-text.</p>
</dd>
<dt class="field-odd">--interpolate</dt>
<dd class="field-odd"><p>Use the globalization information to typeset
identifiers appearing in <span class="smallcaps">Coq</span> escapings inside comments.</p>
</dd>
</dl>
</div></blockquote>
<p><strong>Language options</strong></p>
<blockquote>
<div><p>The default behavior is to assume ASCII 7 bit input files.</p>
<dl class="field-list simple">
<dt class="field-odd">-latin1, --latin1</dt>
<dd class="field-odd"><p>Select ISO-8859-1 input files. It is equivalent to
--inputenc latin1 --charset iso-8859-1.</p>
</dd>
<dt class="field-even">-utf8, --utf8</dt>
<dd class="field-even"><p>Set --inputenc utf8x for <span class="smallcaps">LaTeX</span> output and--charset
utf-8 for HTML output. Also use Unicode replacements for a couple of
standard plain ASCII notations such as → for <code class="docutils literal notranslate"><span class="pre">-&gt;</span></code> and ∀ for <code class="docutils literal notranslate"><span class="pre">forall</span></code>. <span class="smallcaps">LaTeX</span>
UTF-8 support can be found
at <a class="reference external" href="http://www.ctan.org/pkg/unicode">http://www.ctan.org/pkg/unicode</a>. For the interpretation of Unicode
characters by <span class="smallcaps">LaTeX</span>, extra packages which coqdoc does not provide
by default might be required, such as textgreek for some Greek letters
or <code class="docutils literal notranslate"><span class="pre">stmaryrd</span></code> for some mathematical symbols. If a Unicode character is
missing an interpretation in the utf8x input encoding, add
<code class="docutils literal notranslate"><span class="pre">\DeclareUnicodeCharacter{code}{LATEX-interpretation}</span></code>. Packages
and declarations can be added with option <code class="docutils literal notranslate"><span class="pre">-p</span></code>.</p>
</dd>
<dt class="field-odd">--inputenc string</dt>
<dd class="field-odd"><p>Give a <span class="smallcaps">LaTeX</span> input encoding, as an option to <span class="smallcaps">LaTeX</span>
package <code class="docutils literal notranslate"><span class="pre">inputenc</span></code>.</p>
</dd>
<dt class="field-even">--charset string</dt>
<dd class="field-even"><p>Specify the HTML character set, to be inserted in
the HTML header.</p>
</dd>
</dl>
</div></blockquote>
</div>
</div>
<div class="section" id="the-coqdoc-latex-style-file">
<h3>The coqdoc <span class="smallcaps">LaTeX</span> style file<a class="headerlink" href="#the-coqdoc-latex-style-file" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>In case you choose to produce a document without the default <span class="smallcaps">LaTeX</span>
preamble (by using option <code class="docutils literal notranslate"><span class="pre">--no-preamble</span></code>), then you must insert into
your own preamble the command</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>\usepackage{coqdoc}
</pre></div>
</div>
<p>The package optionally takes the argument <code class="docutils literal notranslate"><span class="pre">[color]</span></code> to typeset
identifiers with colors (this requires the <code class="docutils literal notranslate"><span class="pre">xcolor</span></code> package).</p>
<p>Then you may alter the rendering of the document by redefining some
macros:</p>
<dl class="field-list">
<dt class="field-odd">coqdockw, coqdocid, …</dt>
<dd class="field-odd"><p>The one-argument macros for typesetting
keywords and identifiers. Defaults are sans-serif for keywords and
italic for identifiers.For example, if you would like a slanted font
for keywords, you may insert</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>\renewcommand{\coqdockw}[1]{\textsl{#1}}
</pre></div>
</div>
<p>anywhere between <code class="docutils literal notranslate"><span class="pre">\usepackage{coqdoc}</span></code> and <code class="docutils literal notranslate"><span class="pre">\begin{document}</span></code>.</p>
</dd>
<dt class="field-even">coqdocmodule</dt>
<dd class="field-even"><p>One-argument macro for typesetting the title of a <code class="docutils literal notranslate"><span class="pre">.v</span></code>
file. Default is</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>\newcommand{\coqdocmodule}[1]{\section*{Module #1}}
</pre></div>
</div>
<p>and you may redefine it using <code class="docutils literal notranslate"><span class="pre">\renewcommand</span></code>.</p>
</dd>
</dl>
</div>
</div>
<div class="section" id="embedded-coq-phrases-inside-latex-documents">
<h2>Embedded Coq phrases inside <span class="smallcaps">LaTeX</span> documents<a class="headerlink" href="#embedded-coq-phrases-inside-latex-documents" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>When writing documentation about a proof development, one may want
to insert <span class="smallcaps">Coq</span> phrases inside a <span class="smallcaps">LaTeX</span> document, possibly together
with the corresponding answers of the system. We provide a mechanical
way to process such <span class="smallcaps">Coq</span> phrases embedded in <span class="smallcaps">LaTeX</span> files: the <code class="docutils literal notranslate"><span class="pre">coq-tex</span></code>
filter. This filter extracts <span class="smallcaps">Coq</span> phrases embedded in <span class="smallcaps">LaTeX</span> files,
evaluates them, and insert the outcome of the evaluation after each
phrase.</p>
<p>Starting with a file <code class="docutils literal notranslate"><span class="pre">file.tex</span></code> containing <span class="smallcaps">Coq</span> phrases, the <code class="docutils literal notranslate"><span class="pre">coq-tex</span></code>
filter produces a file named <code class="docutils literal notranslate"><span class="pre">file.v.tex</span></code> with the Coq outcome.</p>
<p>There are options to produce the <span class="smallcaps">Coq</span> parts in smaller font, italic,
between horizontal rules, etc. See the man page of <code class="docutils literal notranslate"><span class="pre">coq-tex</span></code> for more
details.</p>
</div>
<div class="section" id="coq-and-gnu-emacs">
<h2><span class="smallcaps">Coq</span> and GNU Emacs<a class="headerlink" href="#coq-and-gnu-emacs" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="section" id="the-coq-emacs-mode">
<h3>The <span class="smallcaps">Coq</span> Emacs mode<a class="headerlink" href="#the-coq-emacs-mode" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p><span class="smallcaps">Coq</span> comes with a Major mode for GNU Emacs, <code class="docutils literal notranslate"><span class="pre">gallina.el</span></code>. This mode
provides syntax highlighting and also a rudimentary indentation
facility in the style of the <code class="docutils literal notranslate"><span class="pre">Caml</span></code> GNU Emacs mode.</p>
<p>Add the following lines to your <code class="docutils literal notranslate"><span class="pre">.emacs</span></code> file:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>(setq auto-mode-alist (cons &#39;(&quot;\\.v$&quot; . coq-mode) auto-mode-alist))
(autoload &#39;coq-mode &quot;gallina&quot; &quot;Major mode for editing Coq vernacular.&quot; t)
</pre></div>
</div>
<p>The <span class="smallcaps">Coq</span> major mode is triggered by visiting a file with extension <code class="docutils literal notranslate"><span class="pre">.v</span></code>,
or manually with the command <code class="docutils literal notranslate"><span class="pre">M-x</span> <span class="pre">coq-mode</span></code>. It gives you the correct
syntax table for the <span class="smallcaps">Coq</span> language, and also a rudimentary indentation
facility:</p>
<ul class="simple">
<li><p>pressing <code class="docutils literal notranslate"><span class="pre">Tab</span></code> at the beginning of a line indents the line like the
line above;</p></li>
<li><p>extra tabulations increase the indentation level (by 2 spaces by default);</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">M-Tab</span></code> decreases the indentation level.</p></li>
</ul>
<p>An inferior mode to run <span class="smallcaps">Coq</span> under Emacs, by Marco Maggesi, is also
included in the distribution, in file <code class="docutils literal notranslate"><span class="pre">inferior-coq.el</span></code>. Instructions to
use it are contained in this file.</p>
</div>
<div class="section" id="proof-general">
<h3>Proof-General<a class="headerlink" href="#proof-general" title="このヘッドラインへのパーマリンク">¶</a></h3>
<p>Proof-General is a generic interface for proof assistants based on
Emacs. The main idea is that the <span class="smallcaps">Coq</span> commands you are editing are sent
to a <span class="smallcaps">Coq</span> toplevel running behind Emacs and the answers of the system
automatically inserted into other Emacs buffers. Thus you don’t need
to copy-paste the <span class="smallcaps">Coq</span> material from your files to the <span class="smallcaps">Coq</span> toplevel or
conversely from the <span class="smallcaps">Coq</span> toplevel to some files.</p>
<p>Proof-General is developed and distributed independently of the system
<span class="smallcaps">Coq</span>. It is freely available at <a class="reference external" href="https://proofgeneral.github.io/">https://proofgeneral.github.io/</a>.</p>
</div>
</div>
<div class="section" id="module-specification">
<h2>Module specification<a class="headerlink" href="#module-specification" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>Given a <span class="smallcaps">Coq</span> vernacular file, the gallina filter extracts its
specification (inductive types declarations, definitions, type of
lemmas and theorems), removing the proofs parts of the file. The <span class="smallcaps">Coq</span>
file <code class="docutils literal notranslate"><span class="pre">file.v</span></code> gives birth to the specification file <code class="docutils literal notranslate"><span class="pre">file.g</span></code> (where
the suffix <code class="docutils literal notranslate"><span class="pre">.g</span></code> stands for <span class="smallcaps">Gallina</span>).</p>
<p>See the man page of <code class="docutils literal notranslate"><span class="pre">gallina</span></code> for more details and options.</p>
</div>
<div class="section" id="man-pages">
<h2>Man pages<a class="headerlink" href="#man-pages" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>There are man pages for the commands <code class="docutils literal notranslate"><span class="pre">coqdep</span></code>, <code class="docutils literal notranslate"><span class="pre">gallina</span></code> and <code class="docutils literal notranslate"><span class="pre">coq-tex</span></code>. Man
pages are installed at installation time (see installation
instructions in file <code class="docutils literal notranslate"><span class="pre">INSTALL</span></code>, step 6).</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="coqide.html" class="btn btn-neutral float-right" title="Coq Integrated Development Environment" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="coq-commands.html" class="btn btn-neutral float-left" title="The Coq commands" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 1999-2018, Inria

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>